(function(){define(["modules/clean/annotations/annotation","modules/constants/file_viewer","modules/core/exception"],function(t,o,n){var e,l,i,u,r,a,d,c,p,s,assert,b,f,g;return d=t.Annotation,p=o.IS_PDFSSR_ENABLED,assert=n.assert,i=120,r=10,u=75,a=320,l=10,e=28,c=38,s=2,g=function(t,o){var n,e,l,i;return n=t.getBoundingBox(),e=window.getComputedStyle(o),i=e.width,l=e.height,n.top>=l||n.left>=i||n.right<0||n.bottom<0},b=function(t,o){var n,c,b,f,g,m,h,x,w,y,B,v,k,S,A,C,P,E,_,D,F,I;D=o.getBoundingClientRect(),I=D.width,F=D.height,y=function(t,o,n){return null==o&&(o=null),null==n&&(n=null),assert(null!==o||null!==n,"doesBubbleFitOnScreen needs a top or bottom value"),n&&(o=-n-i),t>=0&&t<I-a&&o>=0&&o<F-i},B=function(t,o){return"down"===o?F-t-u:-t-r},S=0,k=0,(t.isImageAnnotation()||p)&&(S=D.top+document.body.scrollTop,k=D.left+document.body.scrollLeft),n=t.getClampedBoundingBox(I,F,k,S),c=d.getCenterPosition(n),b=n.bottom-n.top,w={up:n.top*s,down:F-n.bottom,left:n.left,right:I-n.right},v=0,A="up";for(x in w)C=w[x],C>v&&(A=x,v=C);return"up"===A&&(g=c.x-a/2,h=-n.bottom+b+l,f="bottom",y(g,null,h))?[f,{x:g,y:h},B(h,"up")]:"down"===A&&(g=c.x-a/2,m=n.bottom+l,f="top",y(g,m))?[f,{x:g,y:m},B(m,"down")]:(w.left>w.right?(f="right",g=n.left-a-l):(f="left",g=n.right+l),_="down",P=F-n.top,E=n.bottom,E>P&&(_="up"),"down"===_&&P<a&&E>P&&(_="up"),"down"===_&&(f+="-top",m=c.y-e,m=Math.max(0,m),y(g,m))?[f,{x:g,y:m},B(m,"down")]:(f+="-bottom",h=-c.y-e,h=Math.max(-F+1,h),y(g,null,h)?[f,{x:g,y:h},B(h,"up")]:(g=c.x-a/2,m=c.y+l,y(g,m)?["top",{x:g,y:m},B(m,"down")]:(m=l,y(g,m)?["top",{x:g,y:m},B(m,"down")]:(g=0,m=l,y(g,m)?["top",{x:g,y:m},B(m,"down")]:[null,{x:null,y:null},null])))))},f=function(t,o,n){var e,l,u;switch(e=0,l=0,u=t,t){case"top":e=(a-c)/2;break;case"left-top":u="left",l=i/8;break;case"right-top":e=a-c,l=i/8,u="right";break;case"left-bottom":u="left",l=i/8;break;case"right-bottom":e=a-c,l=i/8,u="right";break;case"bottom":e=(a-c)/2}return[u,{x:o+e,y:n+l}]},{isAnnotationOffscreen:g,getBubblePosition:b,getExpandBubblePosition:f}})}).call(this);
//# sourceMappingURL=annotation_utils.min.js-vfldaiYlu.map