define(["external/react","external/react-dom","external/mcl/react_prop_types_shim"],function(e,t,n){return(function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)})({0:function(e,t,n){"use strict";var o=n(124);e.exports={Wrapper:n(125),Button:n(130),Menu:n(131),MenuItem:n(133),openMenu:o.openMenu,closeMenu:o.closeMenu}},4:function(t,n){t.exports=e},23:function(e,n){e.exports=t},124:function(e,t){"use strict";function n(e,t){s[e]=t}function o(e){delete s[e]}function r(e,t){var n=s[e];if(!n)throw new Error("Cannot open "+a);n.openMenu(t)}function i(e,t){var n=s[e];if(!n)throw new Error("Cannot close "+a);n.closeMenu(t)}var s={},a="a menu outside a mounted Wrapper with an id, or a menu that does not exist";e.exports={registerManager:n,unregisterManager:o,openMenu:r,closeMenu:i}},125:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=(function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}})(),a=n(4),u=n(126),c=n(127),p=n(129),h={children:u.node.isRequired,onMenuToggle:u.func,onSelection:u.func.isRequired,closeOnSelection:u.bool,tag:u.string},l=(function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"getChildContext",value:function(){return{ambManager:this.manager}}},{key:"componentWillMount",value:function(){this.manager=c({onMenuToggle:this.props.onMenuToggle,onSelection:this.props.onSelection,closeOnSelection:this.props.closeOnSelection,id:this.props.id})}},{key:"render",value:function(){var e={};return p(e,this.props,h),a.createElement(this.props.tag,e,this.props.children)}}]),t})(a.Component);l.propTypes=h,l.defaultProps={tag:"div"},l.childContextTypes={ambManager:u.object},e.exports=l},126:function(e,t){e.exports=n},127:function(e,t,n){"use strict";function o(){var e=this;e.blurTimer=setTimeout(function(){var t=s.findDOMNode(e.button),n=s.findDOMNode(e.menu),o=t.ownerDocument.activeElement;t&&o===t||n&&n.contains(o)||e.tapStartInMenu||e.isOpen&&e.closeMenu({focusButton:!1})},0)}function r(e,t){this.options.closeOnSelection&&this.closeMenu({focusButton:!0}),this.options.onSelection(e,t)}function i(e){this.isOpen&&"Escape"===e.key&&(e.preventDefault(),this.closeMenu({focusButton:!0}))}var s=n(23),a=n(128),u=n(124),c={wrap:!0,stringSearch:!0},p={init:function(e){this.options=e||{},void 0===this.options.closeOnSelection&&(this.options.closeOnSelection=!0),this.options.id&&u.registerManager(this.options.id,this),this.handleBlur=o.bind(this),this.handleSelection=r.bind(this),this.handleMenuKey=i.bind(this),this.focusGroup=a(c),this.button=null,this.menu=null,this.isOpen=!1,this.tapStartInMenu=!1},focusItem:function(e){this.focusGroup.focusNodeAtIndex(e)},addItem:function(e){this.focusGroup.addMember(e)},clearItems:function(){this.focusGroup.clearMembers()},handleButtonNonArrowKey:function(e){this.focusGroup._handleUnboundKey(e)},destroy:function(){this.button=null,this.menu=null,this.focusGroup.deactivate(),clearTimeout(this.blurTimer),clearTimeout(this.moveFocusTimer)},update:function(){this.menu.setState({isOpen:this.isOpen}),this.button.setState({menuOpen:this.isOpen}),this.options.onMenuToggle&&this.options.onMenuToggle({isOpen:this.isOpen})},openMenu:function(e){if(!this.isOpen&&(e=e||{},this.isOpen=!0,this.update(),this.focusGroup.activate(),e.focusMenu)){var t=this;this.moveFocusTimer=setTimeout(function(){t.focusItem(0)},0)}},closeMenu:function(e){this.isOpen&&(e=e||{},this.isOpen=!1,this.update(),e.focusButton&&s.findDOMNode(this.button).focus())},toggleMenu:function(){this.isOpen?this.closeMenu():this.openMenu()}};e.exports=function(e){var t=Object.create(p);return t.init(e),t}},128:function(e,t){function n(e){e=e||{};var t=e.keybindings||{};this._settings={keybindings:{next:t.next||{keyCode:40},prev:t.prev||{keyCode:38},first:t.first,last:t.last},wrap:e.wrap,stringSearch:e.stringSearch,stringSearchDelay:800},this._keybindingsLookup=[];var n,o;for(n in this._settings.keybindings)o=this._settings.keybindings[n],o&&[].concat(o).forEach(function(e){e.metaKey=e.metaKey||!1,e.ctrlKey=e.ctrlKey||!1,e.altKey=e.altKey||!1,e.shiftKey=e.shiftKey||!1,this._keybindingsLookup.push({action:n,eventMatcher:e})}.bind(this));this._searchString="",this._members=[],e.members&&this.setMembers(e.members),this._boundHandleKeydownEvent=this._handleKeydownEvent.bind(this)}function o(e,t){for(var n in e)if(void 0!==t[n]&&e[n]!==t[n])return!1;return!0}function r(e){return e>=65&&e<=90}function i(e){e&&e.focus&&(e.focus(),"input"===e.tagName.toLowerCase()&&e.select())}n.prototype.activate=function(){return document.addEventListener("keydown",this._boundHandleKeydownEvent,!0),this},n.prototype.deactivate=function(){return document.removeEventListener("keydown",this._boundHandleKeydownEvent,!0),this._clearSearchStringRefreshTimer(),this},n.prototype._handleKeydownEvent=function(e){if(this._getActiveElementIndex()!==-1){var t=!1;this._keybindingsLookup.forEach(function(n){if(o(n.eventMatcher,e))switch(t=!0,e.preventDefault(),n.action){case"next":this.moveFocusForward();break;case"prev":this.moveFocusBack();break;case"first":this.moveFocusToFirst();break;case"last":this.moveFocusToLast();break;default:return}}.bind(this)),t||this._handleUnboundKey(e)}},n.prototype.moveFocusForward=function(){var e,t=this._getActiveElementIndex();return e=t<this._members.length-1?t+1:this._settings.wrap?0:t,this.focusNodeAtIndex(e),e},n.prototype.moveFocusBack=function(){var e,t=this._getActiveElementIndex();return e=t>0?t-1:this._settings.wrap?this._members.length-1:t,this.focusNodeAtIndex(e),e},n.prototype.moveFocusToFirst=function(){this.focusNodeAtIndex(0)},n.prototype.moveFocusToLast=function(){this.focusNodeAtIndex(this._members.length-1)},n.prototype._handleUnboundKey=function(e){if(this._settings.stringSearch){if(""!==this._searchString&&(" "===e.key||32===e.keyCode))return e.preventDefault(),-1;if(!r(e.keyCode))return-1;if(e.ctrlKey||e.metaKey||e.altKey)return-1;e.preventDefault(),this._addToSearchString(String.fromCharCode(e.keyCode)),this._runStringSearch()}},n.prototype._clearSearchString=function(){this._searchString=""},n.prototype._addToSearchString=function(e){this._searchString+=e.toLowerCase()},n.prototype._startSearchStringRefreshTimer=function(){var e=this;this._clearSearchStringRefreshTimer(),this._stringSearchTimer=setTimeout(function(){e._clearSearchString()},this._settings.stringSearchDelay)},n.prototype._clearSearchStringRefreshTimer=function(){clearTimeout(this._stringSearchTimer)},n.prototype._runStringSearch=function(){this._startSearchStringRefreshTimer(),this.moveFocusByString(this._searchString)},n.prototype.moveFocusByString=function(e){for(var t,n=0,o=this._members.length;n<o;n++)if(t=this._members[n],t.text&&0===t.text.indexOf(e))return i(t.node)},n.prototype._findIndexOfNode=function(e){for(var t=0,n=this._members.length;t<n;t++)if(this._members[t].node===e)return t;return-1},n.prototype._getActiveElementIndex=function(){return this._findIndexOfNode(document.activeElement)},n.prototype.focusNodeAtIndex=function(e){var t=this._members[e];return t&&i(t.node),this},n.prototype.addMember=function(e,t){var n=e.node||e,o=e.text||n.getAttribute("data-focus-group-text")||n.textContent||"";this._checkNode(n);var r=o.replace(/[\W_]/g,"").toLowerCase(),i={node:n,text:r};return null!==t&&void 0!==t?this._members.splice(t,0,i):this._members.push(i),this},n.prototype.removeMember=function(e){var t="number"==typeof e?e:this._findIndexOfNode(e);if(t!==-1)return this._members.splice(t,1),this},n.prototype.clearMembers=function(){return this._members=[],this},n.prototype.setMembers=function(e){this.clearMembers();for(var t=0,n=e.length;t<n;t++)this.addMember(e[t]);return this},n.prototype.getMembers=function(){return this._members},n.prototype._checkNode=function(e){if(!e.nodeType||e.nodeType!==window.Node.ELEMENT_NODE)throw new Error("focus-group: only DOM nodes allowed");return e},e.exports=function(e){return new n(e)}},129:function(e,t){"use strict";e.exports=function(e,t,n){for(var o in t)t.hasOwnProperty(o)&&(n[o]||(e[o]=t[o]))}},130:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=(function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}})(),a=n(4),u=n(126),c=n(129),p={children:u.node.isRequired,disabled:u.bool,tag:u.string},h=(function(e){function t(){var e,n,i,s;o(this,t);for(var a=arguments.length,u=Array(a),c=0;c<a;c++)u[c]=arguments[c];return n=i=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),i.handleKeyDown=function(e){if(!i.props.disabled){var t=i.context.ambManager;switch(e.key){case"ArrowDown":e.preventDefault(),t.isOpen?t.focusItem(0):t.openMenu({focusMenu:!0});break;case"Enter":case" ":e.preventDefault(),t.toggleMenu();break;case"Escape":t.handleMenuKey(e);break;default:t.handleButtonNonArrowKey(e)}}},i.handleClick=function(){i.props.disabled||i.context.ambManager.toggleMenu()},s=n,r(i,s)}return i(t,e),s(t,[{key:"componentWillMount",value:function(){this.context.ambManager.button=this}},{key:"componentWillUnmount",value:function(){this.context.ambManager.destroy()}},{key:"render",value:function(){var e=this.props,t={role:"button",tabIndex:e.disabled?"":"0","aria-haspopup":!0,"aria-expanded":this.context.ambManager.isOpen,"aria-disabled":e.disabled,onKeyDown:this.handleKeyDown,onClick:this.handleClick,onBlur:this.context.ambManager.handleBlur};return c(t,e,p),a.createElement(e.tag,t,e.children)}}]),t})(a.Component);h.propTypes=p,h.contextTypes={ambManager:u.object.isRequired},h.defaultProps={tag:"span"},e.exports=h},131:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s,a,u=(function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}})(),c=n(4),p=n(23),h=n(126),l=n(132),f=n(129),d={children:h.oneOfType([h.func,h.node]).isRequired,tag:h.string};e.exports=(a=s=(function(e){function t(){var e,n,i,s;o(this,t);for(var a=arguments.length,u=Array(a),c=0;c<a;c++)u[c]=arguments[c];return n=i=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),i.addTapListener=function(){i.document&&(i.tapListener=l(i.document,i.handleTap))},i.addTapStartListener=function(){i.document&&(i.document.addEventListener("mousedown",i.handleTapStart),i.document.addEventListener("touchstart",i.handleTapStart))},i.handleTap=function(e){p.findDOMNode(i).contains(e.target)||p.findDOMNode(i.context.ambManager.button).contains(e.target)||i.context.ambManager.closeMenu()},i.handleTapStart=function(e){var t=p.findDOMNode(i).contains(e.target);i.context.ambManager.tapStartInMenu=t},s=n,r(i,s)}return i(t,e),u(t,[{key:"getDocumentElement",value:function(){var e=p.findDOMNode(this);if(e){var t=e.ownerDocument;if(t)return t.documentElement}}},{key:"componentWillMount",value:function(){this.context.ambManager.menu=this}},{key:"componentDidUpdate",value:function(){var e=this.context.ambManager;e.isOpen&&!this.document&&(this.document=this.getDocumentElement()),e.isOpen&&!this.tapListener?(this.addTapListener(),this.addTapStartListener()):!e.isOpen&&this.tapListener&&(this.tapListener.remove(),delete this.tapListener,this.removeTapStartListener()),e.isOpen||e.clearItems()}},{key:"componentWillUnmount",value:function(){this.tapListener&&this.tapListener.remove(),this.removeTapStartListener(),this.context.ambManager.destroy()}},{key:"removeTapStartListener",value:function(){this.document&&(this.document.removeEventListener("mousedown",this.handleTapStart),this.document.removeEventListener("touchstart",this.handleTapStart))}},{key:"render",value:function(){var e=this.props,t=this.context.ambManager,n=(function(){return"function"==typeof e.children?e.children({isOpen:t.isOpen}):!!t.isOpen&&e.children})();if(!n)return!1;var o={onKeyDown:t.handleMenuKey,role:"menu",onBlur:t.handleBlur};return f(o,e,d),c.createElement(e.tag,o,n)}}]),t})(c.Component),s.propTypes=d,s.defaultProps={tag:"div"},s.contextTypes={ambManager:h.object.isRequired},a)},132:function(e,t){e.exports=function(e,t,n){function o(e){d||t(e)}function r(t){d=!0,l||(l=!0,e.addEventListener("touchmove",i,n),e.addEventListener("touchend",s,n),e.addEventListener("touchcancel",a,n),f=!1,p=t.touches[0].clientX,h=t.touches[0].clientY)}function i(e){f||Math.abs(e.touches[0].clientX-p)<=10&&Math.abs(e.touches[0].clientY-h)<=10||(f=!0)}function s(e){l=!1,u(),f||t(e)}function a(){l=!1,f=!1,p=0,h=0}function u(){e.removeEventListener("touchmove",i,n),e.removeEventListener("touchend",s,n),e.removeEventListener("touchcancel",a,n)}function c(){e.removeEventListener("click",o,n),e.removeEventListener("touchstart",r,n),u()}var p=0,h=0,l=!1,f=!1,d=!1;return e.addEventListener("click",o,n),e.addEventListener("touchstart",r,n),{remove:c}}},133:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=(function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}})(),a=n(4),u=n(126),c=n(129),p={children:u.node.isRequired,tag:u.string,text:u.string,value:u.any},h=(function(e){function t(){var e,n,i,s;o(this,t);for(var a=arguments.length,u=Array(a),c=0;c<a;c++)u[c]=arguments[c];return n=i=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),i.handleKeyDown=function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),i.selectItem(e))},i.selectItem=function(e){var t=void 0!==i.props.value?i.props.value:i.props.children;i.context.ambManager.handleSelection(t,e)},i.registerNode=function(e){i.node=e},s=n,r(i,s)}return i(t,e),s(t,[{key:"componentDidMount",value:function(){this.context.ambManager.addItem({node:this.node,text:this.props.text})}},{key:"render",value:function(){var e={onClick:this.selectItem,onKeyDown:this.handleKeyDown,role:"menuitem",tabIndex:"-1",ref:this.registerNode};return c(e,this.props,p),a.createElement(this.props.tag,e,this.props.children)}}]),t})(a.Component);h.propTypes=p,h.defaultProps={tag:"div"},h.contextTypes={ambManager:u.object.isRequired},e.exports=h}})});
//# sourceMappingURL=react-aria-menubutton-taylorcode.min.js-vflWQnUlO.map