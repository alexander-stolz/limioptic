(function(){var t=[].indexOf||function(t){for(var e=0,o=this.length;e<o;e++)if(e in this&&this[e]===t)return e;return-1};define("modules/clean/browse/browse_drag_utils",["jquery"],function(e){return{_dragEnabledChecks:[],getDraggedLink:function(o){var n,r,s,i,a;if(null==o)return null;if(r=t.call(o.types,"Files")>=0,n=t.call(o.types,"text/html")>=0&&e(o.getData("text/html")).attr("draggable")||t.call(o.types,"text/uri-list")>=0&&"about:blank"===o.getData("text/uri-list")||t.call(o.types,"Url")>=0&&"about:blank"===o.getData("Url"),r||n)return null;a=null;try{s=o.getData("text/x-moz-url")}catch(t){t}if(null!=s&&(i=s.split("\n"),i.length>=1&&(a=i[0])),!a)try{a=o.getData("text/uri-list")}catch(t){t}if(!a)try{a=o.getData("Url")}catch(t){}return a||(a=null),a},buildUrlLinkfileContents:function(t){return"[InternetShortcut]\r\nURL="+t+"\r\n"},isFileDragEnabled:function(){var t,e,o,n;for(n=this._dragEnabledChecks,e=0,o=n.length;e<o;e++)if(t=n[e],!t())return!1;return!0},addFileDragEnabledCheck:function(t){return this._dragEnabledChecks.push(t)},removeFileDragEnabledCheck:function(t){var e;if(e=this._dragEnabledChecks.indexOf(t),e>=0)return this._dragEnabledChecks.splice(e,1)},removeAllFileDragEnabledChecks:function(){return this._dragEnabledChecks=[]}}})}).call(this),function(){define("modules/clean/cookie_check",["jquery","modules/core/cookies","modules/core/notify","modules/core/i18n"],function(t,e,o,n){var r;return r=n._,{initialize_module:function(n){if(!e.are_enabled())return t(function(){return o.error(r("Please enable browser-cookies to use the Dropbox website."))})}}})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("modules/clean/legacy_pyxl_controllers/bubble_dropdown",["jquery","modules/core/dom","external/underscore","modules/clean/keycode"],function(e,o,n,r){var s;return s=r.KeyCode,(function(){function r(o,s,i,a,l,u,c){var h,d;this.$root=o,this.arrow_direction=s,this.show_on_hover=i,this.show_close_button=a,this.shown_by_default=l,this.top_adjustment=null!=u?u:0,this.tabindex=c,this._hide_bubble=t(this._hide_bubble,this),this._show_bubble=t(this._show_bubble,this),this._toggle_bubble=t(this._toggle_bubble,this),this._on_global_hover=t(this._on_global_hover,this),this._on_mouseout=t(this._on_mouseout,this),this._on_mouseover=t(this._on_mouseover,this),this._onDropdownKeydown=t(this._onDropdownKeydown,this),this._onTargetKeydown=t(this._onTargetKeydown,this),this._activateNonButton=t(this._activateNonButton,this),this.repositionDropdown=t(this.repositionDropdown,this),this.openDropdown=t(this.openDropdown,this),this.closeDropdown=t(this.closeDropdown,this),this.$target=this.$root.find(".bubble-dropdown-target"),this.$dropdown=this.$root.find(".bubble-dropdown"),this.$arrow_anchor=this.$root.find(".bubble-dropdown-arrow-anchor"),this.$arrow=this.$dropdown.find(".bubble-arrow"),this.target_position={top:"bottom",left:"right",bottom:"top",right:"left"}[this.arrow_direction],this.$target.on("keydown",this._onTargetKeydown),this.$dropdown.on("keydown",this._onDropdownKeydown),this.$target.attr("aria-expanded",!1),this.show_close_button?this.$root.find(".bubble-dropdown-x").on("click",this.closeDropdown):this.show_on_hover?(this.$target.on("mouseover",this._on_mouseover),this.$dropdown.on("mouseover",this._on_mouseover),this.$target.on("mouseout",this._on_mouseout),this.$dropdown.on("mouseout",this._on_mouseout),this.$target.attr("tabindex",0).on("focus",this._show_bubble),0===this.$dropdown.find(this._focus_selectors).length&&(h=n.uniqueId("bubble-dropdown-tooltip-"),this.$dropdown.attr({id:h,role:"tooltip"}),this.$target.attr("aria-describedby",h)),e(document).on(r.HOVER_SHOWN,this._on_global_hover)):(this.$target.click(this._toggle_bubble),d=0,this.tabindex&&(d=this.tabindex),"BUTTON"!==this.$target.get(0).tagName&&this.$target.attr({role:"button",tabindex:d}).on("keyup",this._activateNonButton),e("body").on("click",(function(t){return function(o){var n;return!!e(o.target).is("select")||(n=e(o.target).closest(t.$target).length||e(o.target).closest(t.$dropdown).length,n||t._hide_bubble(),!0)}})(this))),this.shown_by_default&&this.openDropdown()}return r.HOVER_SHOWN="bubble:hover:shown",r.prototype._dropdown_shown=!1,r.prototype._focus_selectors="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]",r.prototype.closeDropdown=function(){if(this._dropdown_shown)return this._hide_bubble()},r.prototype.openDropdown=function(){if(!this._dropdown_shown)return this._show_bubble()},r.prototype.repositionDropdown=function(){if(this._dropdown_shown)return this._show_bubble()},r.prototype._activateNonButton=function(t){var e;if((e=t.keyCode)===s.ENTER||e===s.SPACE)return this._toggle_bubble(),!1},r.prototype._onTargetKeydown=function(t){return(t.keyCode===s.ESC&&!this.show_on_hover||t.keyCode===s.TAB&&t.shiftKey||t.keyCode===s.TAB&&1===this.$root.find(this._focus_selectors).length)&&this._hide_bubble(),!0},r.prototype._onDropdownKeydown=function(t){var e;return this.show_on_hover||t.keyCode!==s.ESC?t.keyCode!==s.TAB||t.shiftKey||(e=this.$root.find(this._focus_selectors),t.target===e[e.length-1]&&this._hide_bubble(!this.show_on_hover)):this._hide_bubble(!0),!0},r.prototype._on_mouseover=function(){return e(document).trigger(r.HOVER_SHOWN,this.$target),this._show_bubble(),clearTimeout(this.$dropdown.data("timeout_id"))},r.prototype._on_mouseout=function(){var t;return t=setTimeout(this._hide_bubble,200),this.$dropdown.data("timeout_id",t)},r.prototype._on_global_hover=function(t,e){if(this._dropdown_shown&&e!==this.$target)return this._hide_bubble(),clearTimeout(this.$dropdown.data("timeout_id"))},r.prototype._toggle_bubble=function(){return this._dropdown_shown?this._hide_bubble():this._show_bubble(),!0},r.prototype._show_bubble=function(){var t,e,n,r,s;if(!this.$target.hasClass("disabled")){switch(this.$dropdown.show(),t=this.$arrow_anchor.length?this.$arrow_anchor:this.$target,s=this.$arrow.position().top,e=this.$arrow.position().left,this.arrow_direction){case"left":n=t.outerWidth()+this.$arrow.outerWidth(),r=t.outerHeight()/2-s;break;case"right":n=-1*(this.$dropdown.outerWidth()+this.$arrow.outerWidth()),r=t.outerHeight()/2-s;break;case"top":n=t.outerWidth()/2-e,r=t.outerHeight()+this.$arrow.outerHeight()-this.top_adjustment;break;case"bottom":n=t.outerWidth()/2-e,r=-1*(this.$dropdown.outerHeight()+this.$arrow.outerHeight()+this.top_adjustment)}return o.clone_position(this.$dropdown,t,{setHeight:!1,setWidth:!1,offsetLeft:n,offsetTop:r}),this._dropdown_shown=!0,this.$target.addClass("bubble-dropdown-target--active").attr("aria-expanded",!0)}},r.prototype._hide_bubble=function(t){if(this.$dropdown.hide(),this._dropdown_shown=!1,this.$target.removeClass("bubble-dropdown-target--active").attr("aria-expanded",!1),t)return this.$target.focus()},r})()})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;define("modules/clean/legacy_pyxl_controllers/bubble_menu",["jquery","modules/clean/keycode","modules/clean/legacy_pyxl_controllers/bubble_dropdown"],function(o,n,r){var s;return s=n.KeyCode,(function(n){function r(e,o,n,s){this.$root=e,this.arrow_direction=o,this.show_on_hover=n,this.top_adjustment=null!=s?s:0,this.onKeyDown=t(this.onKeyDown,this),this.onMouseEnter=t(this.onMouseEnter,this),this.$target=this.$root.find(".bubble-dropdown-target"),this.$target.on("keydown",this.onKeyDown),this.$menu=this.$root.find('*[role="menu"]'),this.$menuitems=this.$root.find('*[role="menuitem"]'),this.$menuitems.attr("role","menuitem"),this.$menuitems.on("keydown",this.onKeyDown),this.$menuitems.on("mouseenter",this.onMouseEnter),r.__super__.constructor.apply(this,arguments)}return e(r,n),r.prototype.focusPrevious=function(t){var e;return e=this.$menuitems.index(t),e=e===-1||0===e?this.$menuitems.length-1:e-1,this.$menuitems.get(e).focus()},r.prototype.focusNext=function(t){var e;return e=this.$menuitems.index(t),e=e===-1||e===this.$menuitems.length-1?0:e+1,this.$menuitems.get(e).focus()},r.prototype.onMouseEnter=function(t){return o(this.$menu).removeClass("bubble-menu--keyboard")},r.prototype.onKeyDown=function(t){return o(this.$menu).addClass("bubble-menu--keyboard"),t.keyCode===s.DOWN?(this.focusNext(t.target),t.stopPropagation(),t.preventDefault()):t.keyCode===s.UP?(this.focusPrevious(t.target),t.stopPropagation(),t.preventDefault()):void 0},r})(r)})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;define("modules/clean/legacy_pyxl_controllers/input",["jquery","modules/clean/accessibility/tabbable","modules/core/i18n","modules/core/exception","require"],function(o,n,r,s,i){var a,l,u,c,h,assert;return c=r._,assert=s.assert,h=function(t){var e;return e=o.data(t,"input-element"),assert(e.length,"TextInput element has no related input element please ensure it was setup correctly"),e},o.valHooks.textinput={get:function(t){return h(t).val()},set:function(t,e){return h(t).val(e).trigger("input")}},u=(function(n){function r(e){this.$text_input=e,this._on_change=t(this._on_change,this),this.persistent_label=this.$text_input.is(".label-above"),this.$input=this.$text_input.find(".text-input-input"),this.$text_input.data("input-element",this.$input),this.$label=this.$text_input.find("label"),this.$text_input.find(".error-message").length&&this.$input.addClass("input-error"),this.$text_input.each(function(t,e){return e.type="textinput"}),this.$text_input.focus((function(t){return function(){return setTimeout(function(){return t.$input.focus()},0)}})(this)),o(function(){var t;if("BODY"===(null!=(t=document.activeElement)?t.tagName:void 0))return o(".autofocus:visible").first().focus()}),this._listen(),this._on_change(),r.__super__.constructor.call(this)}return e(r,n),r.prototype._listen=function(){return this.$input.on("keydown keyup paste input blur",(function(t){return function(){return t._on_change()}})(this)),this.$input.on("blur",(function(t){return function(e){return t.$text_input.trigger(e)}})(this)),this.$input.on("focus",(function(t){return function(){return t.$input.removeClass("input-error")}})(this))},r.prototype._on_change=function(){if(!this.persistent_label)return this.$label.toggle(!this.$input.val())},r})(n),a=(function(t){function o(t){this.$text_input=t,this.$caps=this.$text_input.find(".password-caps-indicator"),this.$caps_lock=!1,this.$text_input.on("keypress",(function(t){return function(e){var o,n,r,s,i;return s=/Mac/.test(navigator.platform),n=null!=(i=e.charCode)?i:e.keyCode,o=String.fromCharCode(n),o.toLowerCase()===o.toUpperCase()?r=void 0:o===o.toLowerCase()?r=e.shiftKey:o!==o.toUpperCase()||e.shiftKey&&s||(r=!e.shiftKey),null!=r&&(t.$caps_lock=r),t.$caps_lock?t.$caps.addClass("password-caps-indicator-activated"):t.$caps.removeClass("password-caps-indicator-activated")}})(this)),o.__super__.constructor.apply(this,arguments)}return e(o,t),o})(u),l=(function(n){function r(e){this.$text_input=e,this._on_change=t(this._on_change,this),this.$bubble_title=this.$text_input.find(".password-bubble-title"),this.$bubble_desc=this.$text_input.find(".password-bubble-desc"),this.$meter=this.$text_input.find(".password-input-meter"),this.$default_bubble_text=this.$bubble_desc.text(),this.$last_pwd="",i(["external/zxcvbn"]),r.__super__.constructor.call(this,this.$text_input)}return e(r,n),r.prototype._on_change=function(){var t,e,o,n,s;if(e=this.$input.val(),this.$last_pwd!==e)return this.$last_pwd=e,"correcthorsebatterystaple"===e||"Tr0ub4dour&3"===e||"Tr0ub4dor&3"===e?(o=0,n=c("lol",{comment:"'lol'='laugh out loud'"}),this.$bubble_title.text(n),"correcthorsebatterystaple"===e?(t=c("Whoa there, don't take advice from a webcomic too literally ;)",{comment:"This text is displayed rarely, whenever a user selects a password that is from this comic: http://imgs.xkcd.com/comics/password_strength.png"}),this.$bubble_desc.text(t)):(t=c("Guess again",{comment:"this text is displayed rarely, whenever a user selects a password that is from this comic: http://imgs.xkcd.com/comics/password_strength.png"}),this.$bubble_desc.text(t))):(s=["",c("Weak"),c("So-so"),c("Good"),c("Great!")],o=this._score(e),n=s[o],this.$bubble_title.text(n),this.$bubble_desc.text(this.$default_bubble_text)),this.$meter.find(".password-input-dot").removeClass("password-input-dot-selected"),this.$meter.find(".password-input-dot").slice(4-o,4).addClass("password-input-dot-selected"),r.__super__._on_change.apply(this,arguments)},r.prototype._get_user_inputs=function(){var t,e,n,r,s;for(n=["dropbox"],s=this.$text_input.closest("form").find("input[type=text], input[type=email]"),e=0,r=s.length;e<r;e++)t=s[e],n.push(o(t).val());return n},r.prototype._score=function(t){return window.zxcvbn&&t?Math.max(1,zxcvbn(t,this._get_user_inputs()).score):0},r})(a),{TextInput:u,PasswordInput:a,PasswordWatchInput:l}})}.call(this),function(){var t=[].indexOf||function(t){for(var e=0,o=this.length;e<o;e++)if(e in this&&this[e]===t)return e;return-1};define("modules/clean/react/browse/comment_status",["modules/clean/activity/constants","modules/clean/comments/utils","modules/clean/file_activity/api","modules/clean/flux/dispatcher","modules/clean/react/browse/actions","modules/clean/react/browse/constants","modules/clean/react/browse/store"],function(e,o,n,r,s,i,a){var l,u,c,h,d,p,_,b,f,m,w,g,y,$,v,x,C,k;return l=e.ActivityContext,h=s.browseActions,u=i.BrowseActionTypes,c=i.FileTypes,d=a.browseStore,C={},p=function(t){var e;return n.fetchCommentStatusBatch({actorId:null!=(e=d.user())?e.id:void 0,context:l.BROWSE_FILE_VIEWER,contextDataList:t,isBackgroundRequest:!0})},b=function(t){return null==t.feedback_off&&null==t.comment_count&&null==t.unresolved_comment_count},f=function(t){return t.type===c.FILE},m=function(t){return null!=t.after},_=function(e){var o,n;if(o=e.files,n=o.filter(f).filter(b).map(function(t){return t.fq_path}),n.length>0)return p(n).then(function(e){return t.call(window,"requestIdleCallback")>=0?window.requestIdleCallback(function(){return h.addCommentStatusBatch({commentStatusByFqPath:e})}):h.addCommentStatusBatch({commentStatusByFqPath:e})})},v=_,y=_,g=_,$=function(t){var e,o;return e=t.fileDeltas,t.path,o=e.filter(m).map(function(t){return t.after}),_({files:o})},w=function(t){var e;switch(e=t.action,e.type){case u.LOAD_PATH:return v(e.data);case u.ADD_FILES:return y(e.data);case u.INITIALIZE_EVERYTHING:return g(e.data);case u.CHANGE_FILES:return $(e.data)}},x=function(t){return null==t&&(t=r),C={dispatcher:t,dispatchToken:t.register(w)},_({files:d.files().toArray()})},k=function(){return C.dispatcher.unregister(C.dispatchToken),C={}},{setup:x,teardown:k}})}.call(this),function(){define("modules/clean/react/locale_selector",["jquery","external/react","external/underscore","modules/core/i18n","modules/core/exception","modules/clean/ajax","modules/clean/react/css","modules/clean/react/modal","modules/clean/react/sprite","modules/constants/locales","modules/constants/page_load","modules/core/browser","modules/core/notify","modules/core/uri"],function(t,e,o,n,r,s,i,a,l,u,c,h,d,p){var _,b,f,m,w,g,y,$,v,x;return w=n._,m=a.Modal,x=e.DOM,$=e.createElement,y=function(t,e,o){var n;return null==o&&(o=!1),n=o?"/team/admin/set_locale":"/set_locale",d.success(w("Changing language...")),s.SilentBackgroundRequest({url:p({path:n}),data:{locale:t,locale_cont:e},success:function(){return h.redirect(e)}})},f=e.createClass({displayName:"LocaleTag",propTypes:{locale:e.PropTypes.shape({localeCode:e.PropTypes.string.isRequired,localeName:e.PropTypes.string.isRequired,decorator:e.PropTypes.string.isRequired}).isRequired},render:function(){var t;return t=this.props.locale.localeName,""!==this.props.locale.decorator&&(t+=" ["+this.props.locale.decorator+"]"),x.span({"data-locale":this.props.locale.localeCode},t)}}),g=e.createClass({displayName:"LocaleSelectorModal",propTypes:{isTeamAdminSettingsConsole:e.PropTypes.bool.isRequired,shouldAllowInternalLocales:e.PropTypes.bool.isRequired},handleCloseModal:function(t){return history.pushState("",document.title,h.get_href_no_hash())},handleLocaleSelected:function(t){return(function(e){return function(o){return o.preventDefault(),history.pushState("",document.title,h.get_href_no_hash()),m.close(),y(t,h.get_href_no_hash(),e.props.isTeamAdminSettingsConsole)}})(this)},_renderLocaleList:function(){var t,e;return e=this.props.shouldAllowInternalLocales?u.LIST_OF_LOCALES_WITH_INTERNAL:u.LIST_OF_LOCALES_WITHOUT_INTERNAL,x.div({className:"react-locale-selector-modal"},x.ul({className:"react-locale-selector-modal__list u-unlist u-trim-padding"},function(){var o,n,r;for(r=[],o=0,n=e.length;o<n;o++)t=e[o],r.push(this._renderLocale(t));return r}.call(this)))},_renderLocale:function(t){return x.li({key:t.localeCode},x.button({className:"locale-option button-as-link react-locale-selector-modal__list-item-button",onClick:this.handleLocaleSelected(t.localeCode).bind(this)},$(f,{locale:t})))},render:function(){return $(m,{onDismissCompleted:this.handleCloseModal,ref:"modal",width:550,title:w("Choose a language"),acceptButtonText:null},this._renderLocaleList())}}),b=i(g,["/static/css/components/react_locale_selector-vflhGMsCx.css","/static/css/modal-vfl3a7WF1.css"]),_=e.createClass({displayName:"LocaleSelector",statics:{showModal:function(t,e){return null==t&&(t=!1),null==e&&(e=!0),m.showInstance($(b,{isTeamAdminSettingsConsole:t,shouldAllowInternalLocales:e}))}},propTypes:{isTeamAdminSettingsConsole:e.PropTypes.bool,shouldAllowInternalLocales:e.PropTypes.bool},getDefaultProps:function(){return{isTeamAdminSettingsConsole:!1,shouldAllowInternalLocales:!0}},handleLocaleLinkClick:function(t){return t.preventDefault(),m.showInstance($(b,{isTeamAdminSettingsConsole:this.props.isTeamAdminSettingsConsole,shouldAllowInternalLocales:this.props.shouldAllowInternalLocales}))},_renderLocaleLink:function(){return x.span({id:"locale-link"},$(l,{group:"web",name:"globe_gray_20x20",alt:""}),x.button({className:"button-as-link react-locale-selector-link",title:w("Choose a language"),onClick:this.handleLocaleLinkClick},$(f,{locale:o.find(u.LIST_OF_LOCALES_WITH_INTERNAL,function(t){return t.localeCode===c.USER_LOCALE})}),$(l,{class:"arrow",group:"web",name:"arrow-up-gray",alt:""})))},render:function(){return x.div({id:"locale-container"},this._renderLocaleLink())}}),v=i(_,["/static/css/components/locale_selector-vflRu24eh.css"]),{LocaleSelectorModal:b,LocaleSelector:v,initialize_module:function(e){if(null!=e?e.dom_id:void 0)return t(document).ready(function(){return t("#"+e.dom_id).click(function(){return v.wrappedClass.showModal()})})}}})}.call(this);
//# sourceMappingURL=pkg-maestro-misc.min.js-vflab4Fur.map