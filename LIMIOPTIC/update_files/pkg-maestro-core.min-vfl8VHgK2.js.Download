define("modules/clean/accessibility/utils",["require","exports","modules/clean/keycode"],function(t,e,n){"use strict";e.accessibleColorPalette=["#006AFF","#0073E1","#007BC3","#007F9B","#008578","#008750","#008928","#008800","#0573EB","#0579C3","#0580A0","#05857D","#058655","#058932","#05890A","#0A71F0","#0A78CD","#0A7FAA","#0A8487","#0A855F","#0A8737","#0A880F","#0F6EF5","#0F76D7","#0F7DB4","#0F818C","#0F8669","#0F8741","#0F8819","#146DFF","#1475DC","#147BBE","#14819B","#148473","#14864B","#148723","#1969FF","#1972E1","#1979C3","#1980A0","#198278","#198550","#198728","#198700","#1E70E6","#1E79C8","#1E7FA5","#1E837D","#1E8555","#1E8832","#1E880A","#236EEB","#2376D2","#237CAF","#238187","#23845F","#23883C","#238914","#286DF5","#2876D7","#287CB4","#28808C","#288469","#288541","#288619","#2D6AFA","#2D73DC","#2D7BB9","#2D8096","#2D836E","#2D8446","#2D8823","#3267FF","#3271E1","#3279C3","#327D9B","#328378","#328550","#328528","#328600","#376EE6","#3777C8","#377DA5","#37807D","#37855A","#378632","#37860A","#3C6CEB","#3C74CD","#3C7BAA","#3C8087","#3C835F","#3C8437","#3C8614","#416AF5","#4173D7","#4179B9","#417E91","#418069","#418341","#418419","#4667FA","#466FDC","#4676BE","#467B9B","#468073","#46824B","#468423","#4B63FF","#4B6DE1","#4B75BE","#4B7B9B","#4B8078","#4B8150","#4B8228","#4B8300","#5069E6","#5072C8","#5079A5","#507C7D","#50815A","#508232","#50830A","#5567F0","#556FD2","#5575AA","#557A87","#557E5F","#55823C","#558314","#5A65F5","#5A6DD7","#5A75B4","#5A7A91","#5A7D69","#5A7F41","#5A821E","#5F61FA","#5F69DC","#5F71BE","#5F779B","#5F7E50","#5F7F28","#5F8100","#6466E6","#646DC3","#6475A5","#647D55","#647E2D","#648005","#6964EB","#696BC8","#6972A5","#697C55","#697E2D","#697F05","#6E62EB","#6E6AC8","#6E71A5","#6E7C46","#6E7E1E","#7358FF","#7363E1","#736ABE","#7372A0","#785CEB","#7864CD","#786DAF","#7D53FF","#7D5EE1","#7D66C3","#7D6EA0","#8255F5","#825FD7","#8268B9","#826D91","#8756F0","#8760D2","#8766AA","#8C4AFF","#8C56E6","#8C60C8","#8C66A0","#914BF5","#9157DC","#9160BE","#916596","#964BEB","#9655D2","#965EAF","#966691","#9B47F0","#9B51D2","#9B5CB4","#9B6191","#A041F5","#A04EDC","#A058B9","#A06196","#A53BF5","#A548DC","#A553BE","#A55A96","#AA34FA","#AA42E6","#AA4FC8","#AA58A0","#AA5F78","#AA614B","#AA6623","#AF29FF","#AF38E6","#AF47D2","#AF52AF","#AF5782","#AF5E5A","#AF622D","#AF6400","#B42CF0","#B43CD7","#B447B4","#B45291","#B45864","#B45D37","#B45D05","#B919FF","#B92CE6","#B93BC8","#B94AAA","#B9547D","#B95B4B","#B95A14","#BE0CF0","#BE1FEB","#BE31CD","#BE41B4","#BE4C87","#BE5455","#BE561E","#C307EB","#C31AE1","#C32CC8","#C33DB4","#C3488C","#C34F5A","#C35428","#C803E1","#C816E1","#C826C3","#C836AF","#C8428C","#C8495F","#C84F32","#C85200","#CD11C8","#CD22C8","#CD31AF","#CD3B87","#CD4664","#CD4B37","#CD4D0A","#D20CC3","#D21CB4","#D229A0","#D23587","#D23E64","#D23F37","#D2430F","#D708AF","#D716A0","#D72291","#D73087","#D7355F","#D73A3C","#D73A14","#DC0596","#DC119B","#DC1D91","#DC256E","#DC2E5A","#DC343C","#DC3419","#E1027D","#E10C87","#E11882","#E11B5A","#E12755","#E12A37","#E12919","#E13200","#E6075F","#E60C4B","#E61655","#E61D46","#E62132","#E61B14","#E61A00","#EB0232","#EB0214","#EB0D30"],e.accessibleTriggerProps=function(t,e){return void 0===e&&(e="button"),{role:e,tabIndex:0,onClick:function(e){return t(e)},onKeyDown:function(e){if(e.keyCode===n.KeyCode.ENTER||e.keyCode===n.KeyCode.SPACE)return t(e)}}}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty,n=function(t,e){return function(){return t.apply(e,arguments)}};define("modules/clean/ajax",["jquery","external/underscore","modules/clean/devtools/perf_hub_actions","modules/clean/stormcrow/stormcrow_panel_actions","modules/clean/job_progress","modules/clean/storage","modules/clean/undo","modules/constants/ajax_strings","modules/constants/debug","modules/constants/request","modules/constants/page_load","modules/core/browser","modules/core/cookies","modules/core/exception","modules/core/html","modules/core/notify","modules/core/uri"],function(e,r,i,o,s,a,c,u,_,l,p,d,h,f,m,g,w){var v,y,S,E,b,x,A,T,C,O,D,N,I,F,L,R,k,B,M,q,j,P,J,U,H,W,G,z,Q,V,K,Y,X,Z,$,tt,et,nt,rt,it,ot,st,at,ct,ut,_t;return j=i.PerfHubActions,G="err:",z="htmlerr:",W="async_task_started:",H="async_task_err:",U="done:",M="oref",Q=function(t,n){var r,i,o,s,a;return null==t&&(t={}),null==n&&(n=[]),null==t.type&&(null!=t.method?(f.reportStack("Use of method property within modules/clean/ajax's Request",{tags:["module:ajax"]}),s=t.method):s="POST",t.type=s),r=new E(t),i=_t(r,n),a=e.ajax({url:i.url(),type:t.type,data:i.data(),dataType:t.dataType||"text",headers:i.headers(),traditional:!0,xhrFields:i.xhrFields(),success:function(t,e,n){return i.success(t,e,n)},error:function(t,e,n){return i.error(t,e,n)},complete:function(t,e){return i.complete(t,e)},async:null==(o=t.async)||o,timeout:t.timeout}),i.request(a)},_t=function(t,e){var n,i,o,s,a,c,u,_;for(i=[t],_=r(e.slice(0)).reverse(),o=0,c=_.length;o<c;o++)n=_[o],i.push(new n);for(a=null,s=0,u=i.length;s<u;s++)n=i[s],a&&(n.next=a),a=n;return a},E=(function(){function t(t){null==t&&(t={}),this.options=function(){return t},this.url=function(){return String(t.url||"")},this.data=function(){return t.data||{}},this.headers=function(){return t.headers||{}},this.xhrFields=function(){return t.xhrFields||{}},this.success=t.success||this.identity,this.error=t.error||this.identity,this.complete=t.complete||this.identity,this.request=this.identity}return t.prototype.identity=function(t){return t},t})(),T=(function(){function t(){}return t.prototype.options=function(){return this.next.options()},t.prototype.url=function(){return this.next.url()},t.prototype.data=function(){return this.next.data()},t.prototype.headers=function(){return this.next.headers()},t.prototype.xhrFields=function(){return this.next.xhrFields()},t.prototype.success=function(t,e,n){return this.next.success(t,e,n)},t.prototype.error=function(t,e,n){return this.next.error(t,e,n)},t.prototype.complete=function(t,e){return this.next.complete(t,e)},t.prototype.request=function(t){return this.next.request(t)},t})(),x=(function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.SUPPORTED_TLDS=["dropbox.com"],r.prototype.data=function(){var t;return f.assert(this._is_db_domain(),"injecting CSRF token into request to non-dropbox domain"),t={is_xhr:!0},"get"!==(this.options().type||"post").toLowerCase()&&(t.t=h.read("__Host-js_csrf")||""),e.extend(t,this.next.data())},r.prototype._is_db_domain=function(){var t,e;return!(t=w.parse(String(this.url())).authority)||(e=t.split("."),this.SUPPORTED_TLDS.reduce(function(t,n){var r,i;return i=n.split("."),r=e.slice(-1*i.length).join("."),t||n===r},!1))},r})(T),tt=(function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.data=function(){var t,e;return t=this.next.data(),e=this.options(),e.subject_user&&!t._subject_uid&&(t._subject_uid=String(e.subject_user)),t},n.prototype.headers=function(){var t,e;return t=this.next.headers(),e=this.options(),e.subject_user&&(t["X-DROPBOX-UID"]=String(e.subject_user)),t},n})(T),b=(function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.error=function(t,e,n){var r,i;return 403===t.status&&(r=a.SessionStorage.get("reload-timestamp"),i=(new Date).getTime(),(!r||i-r>3e4)&&(a.SessionStorage.set("reload-timestamp",i),window.location.reload(!0))),this.next.error(t,e,n)},n})(T),F=(function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.data=function(){var t;return t=this.next.data(),null!=e.ajaxSettings.restrict&&(t.restrict=e.ajaxSettings.restrict),t},r})(T),V=(function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.data=function(){var t,n;return t=this.next.data(),l.REQUEST_TRACING_ENABLED&&"post"===this.options().type.toLowerCase()?(n={parent_request_id:l.REQUEST_ID},e.extend(n,t)):t},r})(T),J=(function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.data=function(){var t,n;return t=this.next.data(),n={},p.PUBLIC_MODE_OVERRIDE&&(n.public_mode_override=1),p.COUNTRY_OVERRIDE&&(n.country_override=p.COUNTRY_OVERRIDE),e.extend(n,t)},r})(T),D=(function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.url=function(){var t,e;return e=this.next.url(),_.CPROFILE_ENABLED?(t=_.CPROFILE_PARAMETER,0!==t.indexOf("deps:")?w.parse(e).updateQuery({cProfile:t}).toString():e):e},n.prototype.success=function(t,e,n){return j.add_ajax_profile(n,this.url()),this.next.success(t,e,n)},n})(T),N=(function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.data=function(){var t;return t=this.next.data(),_.STORMCROW_PANEL?e.extend({stormcrow_panel:1},t):t},r.prototype.complete=function(t,e){var n,r;return _.STORMCROW_PANEL&&(r=this.url(),n=t.getResponseHeader("X-Dropbox-Request-Id"),w.parse(r).getPath()!==o.FEATURES_USED_URL&&S({url:o.FEATURES_USED_URL,data:{request_id:n},success:function(t,e,i){return o.add_request_info({url:r,request_id:n,features_used:JSON.parse(t)})}})),this.next.complete(t,e)},r})(T),O=(function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.error=function(t,e,n){return this._notify_dev(t,e,n),this.next.error(t,e,n)},n.prototype._notify_dev=function(t,e,n){},n})(T),et=(function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.success=function(t,e,n){var r,i,o,s,a;if(!n.responseText.length)return this.next.error(n,e,"");if(o=!0,i=!1,0===n.responseText.indexOf(G))r=n.responseText.substr(G.length),"{"!==(s=r[0])&&"["!==s||(o=!1);else{if(0!==n.responseText.indexOf(z))return this.next.success(t,e,n);r=n.responseText.substr(z.length),i=!0}return a=this.next.error(n,e,r),o&&(i&&(r=new m(r)),g.error(r)),a},n.prototype.error=function(t,e,n){return"abort"!==e&&g.error(u.PROBLEM_COMPLETING_REQUEST),this.next.error(t,e,n)},n})(T),L=(function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.success=function(t,e,n){var r;if(!this.options().skipErrorHandling){if(!n.responseText.length)return this.next.error(n,e,"");if(0===n.responseText.indexOf(G))return r=n.responseText.substr(G.length),this.next.error(n,e,r)}return this.next.success(t,e,n)},n})(T),nt=(function(e){function r(){return this._clear_working_msg=n(this._clear_working_msg,this),r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.request=function(t){return this.xhr=t,setTimeout((function(t){return function(){if(!t._request_finished())return t._should_show_working_msg()?(t._show_working_msg(),t.xhr.done(t._clear_working_msg)):void 0}})(this),4e3),this.next.request(this.xhr)},r.prototype._request_finished=function(){return 4===this.xhr.readyState},r.prototype._should_show_working_msg=function(){return g.isShown()&&g.current()!==c.undo_notification},r.prototype._show_working_msg=function(){return this.notification=g.success(u.STILL_WORKING)},r.prototype._clear_working_msg=function(){if(g.isShown()&&this.notification===g.current())return g.clear()},r})(T),P=(function(r){function i(){return this._watch=n(this._watch,this),i.__super__.constructor.apply(this,arguments)}return t(i,r),i.prototype.data=function(){var t,n;return this.job_id=i.generate_job_id(),t=this.next.data(),this.uid=t._subject_uid,n=this.options().subject_user,!this.uid&&n&&(this.uid=String(n)),e.extend({job_id:this.job_id},t)},i.prototype.request=function(t){return this._interval=1e3,this._failures=0,this._watch_count=0,this._watch_id=setInterval(this._watch,this._interval),this.next.request(t)},i.prototype.success=function(t,e,n){return this.next.success(t,e,n)},i.prototype.error=function(t,e,n){return this.next.error(t,e,n)},i.prototype.complete=function(t,e){return this._stop(),s.Job.handled(this.job_id),this.next.complete(t,e)},i.prototype._watch=function(){return s.Job.peek(this.job_id)?this._stop():(this._watch_count++,this._watch_count%10===0&&(clearInterval(this._watch_id),this._interval=Math.min(Math.floor(1.5*this._interval),3e4),this._watch_id=setInterval(this._watch,this._interval)),this._show_progress_modal(),this._fetch_progress())},i.prototype._stop=function(){return clearInterval(this._watch_id),s.ModalProgress.hide()},i.prototype._show_progress_modal=function(){if(!this._modal_shown)return this._modal_shown=!0,s.ModalProgress.show(this.options().progress_text)},i.prototype._fetch_progress=function(){var t;return t={},this.uid&&(t._subject_uid=this.uid),S({url:"/job_status/"+this.job_id,data:t,success:function(t,e,n){var r;return r=0===n.responseText.indexOf("done")?"1/1":n.responseText,s.ModalProgress.update(r)},error:(function(t){return function(e,n,r){if(t._failures++,!(t._failures<3))return t._stop(),t.next.error(e,n,r)}})(this)})},i.generate_job_id=function(){var t,e,n;return t=new Date,n=t.getTime().toString(),e=Math.floor(1e6*Math.random()).toString(),e=("000000"+e).substring(e.length),n+e},i})(T),y=(function(e){function r(){return this._watch=n(this._watch,this),r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.data=function(){var t,e;return t=this.next.data(),this.uid=t._subject_uid,e=this.options().subject_user,!this.uid&&e&&(this.uid=String(e)),t},r.prototype.success=function(t,e,n){return this._is_async_job_response(n)?(this.job_id=n.responseText.split(":")[1],this._interval=1e3,this._failures=0,this._watch_count=0,this._watch_id=setInterval(this._watch,this._interval)):this.next.success(t,e,n)},r.prototype.complete=function(t,e){if(!this._is_async_job_response(t))return this.next.complete(t,e)},r.prototype._is_async_job_response=function(t){var e,n;return 0===(null!=(n=t.responseText)?n.indexOf(W):void 0)&&(e=t.responseText.split(":")[1],e.match(/^[A-Za-z0-9_\-=]*$/))},r.prototype._watch=function(){return s.Job.peek(this.job_id)?this._stop():(this._watch_count++,this._watch_count%10===0&&(clearInterval(this._watch_id),this._interval=Math.min(Math.floor(1.5*this._interval),3e4),this._watch_id=setInterval(this._watch,this._interval)),this._show_progress_modal(),this._fetch_progress())},r.prototype._stop=function(){return clearInterval(this._watch_id),s.ModalProgress.hide()},r.prototype._show_progress_modal=function(){if(!this._modal_shown)return this._modal_shown=!0,s.ModalProgress.show(this.options().progress_text)},r.prototype._fetch_progress=function(){var t;return t={},this.uid&&(t._subject_uid=this.uid),Z({url:"/async_task_status/"+this.job_id,data:t,success:(function(t){return function(e,n,r){var i,o,a;return a=r.responseText,0===a.indexOf(U)?(s.Job.handled(t.job_id),t._stop(),a=a.substr(U.length),r.responseText=a,t.next.success(a,n,r),t.next.complete(r,n)):0===a.indexOf(G)?(s.Job.handled(t.job_id),t._stop(),i=a.substr(G.length),g.error(i),t.next.error(r,n,i),t.next.complete(r,n)):0===a.indexOf(H)?(s.Job.handled(t.job_id),t._stop(),o=a.substr(H.length),g.error(new m(o)),t.next.complete(r,n)):s.ModalProgress.update(a)}})(this),error:(function(t){return function(e,n,r){if(t._failures++,!(t._failures<3))return t._stop(),t.next.error(e,n,r),t.next.complete(e,n)}})(this)})},r})(T),q=(function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.data=function(){var t,n;return t=d.get_uri().getQuery()[M],!(null!=(n=this.next.data())?n.oref:void 0)&&t?e.extend({oref:t},this.next.data()):this.next.data()},r})(T),A=(function(r){function i(){this.browser_unload_handler=n(this.browser_unload_handler,this),i.__super__.constructor.apply(this,arguments),this.is_browser_unloading=!1}return t(i,r),i.prototype.browser_unload_handler=function(){this.is_browser_unloading=!0},i.prototype.request=function(t){var n;return e(window).on("beforeunload",this.browser_unload_handler),(n=this.next).request.apply(n,arguments)},i.prototype.error=function(t,e,n){var r,i,o;return r=0===t.status&&0===t.readyState&&"error"===e&&!n,i=r&&this.is_browser_unloading,i?this.next.error(t,"abort","unload"):(o=this.next).error.apply(o,arguments)},i.prototype.complete=function(){var t;return e(window).off("beforeunload",this.browser_unload_handler),(t=this.next).complete.apply(t,arguments)},i})(T),ut=[A],v=[tt,x,b,F],B=[nt],C=[O,D,N,V,J],k=[y],it=[].concat(ut,B,et,C,v,k),at=function(t){return null==t&&(t={}),Q(t,it)},ct=function(t){return null==t&&(t={}),Q(t,[].concat(q,it))},I=[].concat(ut,B,L,C,v,k),R=function(t){return null==t&&(t={}),Q(t,I)},ot=[].concat(ut,B,et,C,v,P,k),st=function(t){return null==t&&(t={}),Q(t,ot)},S=function(t){return null==t&&(t={}),Q(t,[].concat(ut,C,v))},K=[tt,x,F],Y=[].concat(ut,C,K),Z=function(t){return null==t&&(t={}),Q(t,Y)},$=function(t){return null==t&&(t={}),Q(t,[].concat(q,Y))},rt=function(t){var n,r,i;return null==t&&(t={}),n=new E(t),r=_t(n,v),i=e.ajax({url:r.url(),type:"OPTIONS",data:r.data(),success:function(t,e,n){return r.success(t,e,n)},error:function(t,e,n){return r.error(t,e,n)},complete:function(t,e){return r.complete(t,e)}}),r.request(i)},X=function(t){var e,n,r,i,o,s,a,c;if(null==t&&(t={}),delete t.success,delete t.error,delete t.complete,null==navigator.sendBeacon)return Z(t);null==t.type&&(t.type="POST"),e=new E(t),n=_t(e,[].concat(K,V)),a=n.url(),r=new FormData,o=n.data();for(i in o)c=o[i],null!=c&&""!==c&&r.append(i,c);return s=navigator.sendBeacon(a,r),s?void 0:console.warn("Beacon request failed: "+a)},{Request:Q,BackgroundRequest:S,SilentBackgroundRequest:Z,SilentBackgroundRequestOref:$,WebRequest:at,WebRequestOref:ct,FormWebRequest:R,WebProgressRequest:st,ValidationSchemaRequest:rt,SilentBackgroundBeaconRequest:X}})}.call(this),function(){define("modules/clean/analytics",["jquery","modules/clean/viewer","modules/clean/ajax","modules/clean/web_timing_logger"],function(t,e,n,r){var i,o,s,a,c,u,_,l,p,d,h,f,m,g,w,v,y,S,E,b,x,A,T;return T=function(t){var n,r;return r=e.get_viewer(),t?[t]:(function(){var t,e,i,o;for(i=r.get_users(),o=[],t=0,e=i.length;t<e;t++)n=i[t],o.push(n.id);return o})()},i={log:function(t,e){var r,i,o,s,a;for(o=0,s=0,a=t.length;s<a;s++)r=t[s],r.dir&&o++;return i=t.length-o,n.SilentBackgroundRequest({url:"/browse_actions_context_menu_logger",data:{file_count:i,folder_count:o,action:e}})}},a={log:function(t,e){return n.SilentBackgroundRequest({url:"/content_manager_actions_logger",data:{ns_id:t,action:e}})}},S={log:function(t,e){return n.SilentBackgroundRequest({url:"/log/ux_analytics",data:{event_type:t,extra_params:JSON.stringify(e)}})}},d={log:function(t,e){return n.SilentBackgroundRequest({url:"/log/pro_events",data:{event:t,extra:JSON.stringify(e)}})}},c={start_time:0,start:function(t){if(null==t&&(t=null),!this.start_time)return this.start_time=t||Date.now()},stop:function(t){return this.start_time?t.extra.time_taken=Date.now()-this.start_time:t.extra.time_taken=0,this.log(t),this.start_time=0},log:function(t){return n.SilentBackgroundRequest({url:"/log/file_view",data:{viewing_user_ids:JSON.stringify(T(t.user_id)),target:t.target,platform:t.platform,origin:t.origin||null,action:t.action||null,ns_id:t.ns_id,sjid:t.sjid,ns_path:t.ns_path,shared_link_url:t.shared_link_url||null,extra:JSON.stringify(t.extra)}})}},_={log:function(t,e,r,i,o,s){return null==s&&(s={}),n.SilentBackgroundRequest({url:"/linkfile_activity_log",data:{event_name:t,file_ext:e,link_domain:r,success:i,source:o,extra:JSON.stringify(s)}})}},p={start_times:{},start:function(t,e){return null==e&&(e=null),this.start_times[t]=e||Date.now()},stop:function(t,e){if(null!=this.start_times[t])return e.total_time=Date.now()-this.start_times[t],this.log(t,e),delete this.start_times[t]},log:function(t,e){return null==e&&(e={}),n.SilentBackgroundRequest({url:"/preview_activity_log",data:{event_name:t,input_method:e.input_method,file_ext:e.file_ext,extra:e.extra}})}},l={log:function(t,e,r,i,o,s){return null==s&&(s={}),n.SilentBackgroundRequest({url:"/log/mobile_file_preview",data:{client_time:+new Date,event_name:t,file_viewer_session_id:e,file_preview_session_id:r,file_ns_id:i,file_sjid:o,extra:JSON.stringify(s)}})}},h={create_completion_log_dict:function(t,e,n,r,i,o,s,a,c){if(null==t&&(t=null),null==e&&(e=null),null==n&&(n=null),null==r&&(r=null),null==i&&(i=null),null==o&&(o=null),null==s&&(s=null),null==a&&(a=null),null==c&&(c=null),null!=t)return null!=e&&(t.used_spellcorrect=e),null!=n&&(t.request_id=n),null!=r&&(t.latency=(new Date).getTime()-r),null!=i&&(t.query_string=i),null!=o&&(t.displayed=o),null!=s&&(t.result_count=s),null!=a&&200!==a&&(t.failure_type=a),null!=c&&(t.search_session_id=c),t},log:function(t,e,r){return null==r&&(r={}),n.SilentBackgroundRequest({url:"/searchclientlogger",subject_user:e,data:{event_name:t,action_type:r.action_type,displayed:r.displayed,failure_type:r.failure_type,file_nsid:r.file_nsid,file_sjid:r.file_sjid,firefly:r.firefly,infinite_scroll:r.infinite_scroll,latency:r.latency,match_type:r.match_type,paper_pad_id:r.paper_pad_id,path_scoped:r.path_scoped,position:r.position,query_string:r.query_string,request_id:r.request_id,result_count:r.result_count,search_type:r.search_type,typeahead_session_id:r.search_session_id,used_spellcorrect:r.used_spellcorrect,viewport:r.viewport}})}},m={flow_id:null,log:function(t,e,r,i,o){var s;return null==r&&(r=null),null==i&&(i={}),null==o&&(o=!1),(o||null===this.flow_id)&&(s=new Date,this.flow_id=s.getTime().toString()+Math.random().toString(),this.flow_id=this.flow_id.replace(".","")),n.SilentBackgroundRequest({url:"/sflogger",data:{platform:t,event_name:e,extra:JSON.stringify(i),active_uid:null!=r?r.id:null,flow_id:this.flow_id}})}},f={log:function(t,e,r,i){return null==i&&(i={}),n.SilentBackgroundRequest({url:"/share_tib_log",data:{event:e,origin:r,extra:JSON.stringify(i)},subject_user:t})},log_unauth:function(t,e,r){return null==r&&(r={}),n.SilentBackgroundRequest({url:"/share_tib_log_unauth",data:{event:t,origin:e,extra:JSON.stringify(r)}})}},g={log:function(t,e,r){return null==r&&(r={}),n.SilentBackgroundRequest({url:"/log/sharing_experiments",data:{action_type:e,action_extras:JSON.stringify(r)},subject_user:t})}},w={TARGET_ITEMS:{FOLDER_IS_SF:"folder-is-sf",FOLDER_CAN_SF:"folder-can-sf",FOLDER_NO_SF:"folder-no-sf",FILE:"file"},log:function(t,e,r){return new n.SilentBackgroundRequest({url:"/shmuilog",data:{evt:t,origin:e,target_item:r}})},log_with_target_file:function(t,e,n){return this.log(t,e,this.get_target_item(n))},get_target_item:function(t){var e;return e=w.TARGET_ITEMS,t.dir?t.is_shared_folder()?e.FOLDER_IS_SF:t.could_be_shared_folder()?e.FOLDER_CAN_SF:e.FOLDER_NO_SF:e.FILE}},y={LOG_CATEGORY:{PROMO_TEAMS:"promo_teams",TEAM_INFO:"team_info",UPGRADE:"upgrade_to_dfb",USAGE_INFO:"usage_info",LIMITED_TEAM_INFO_DETAILED:"limited_team_info_detailed",TEAM_AND_USER_INFO:"team_and_user_info"},log:function(t,e,r,i,o,s){var a;return null==i&&(i=null),null==o&&(o=!1),a=T(i),n.SilentBackgroundRequest({url:"/teamswalogger",data:{event_name:t,extra:JSON.stringify(e),for_uids:JSON.stringify(a),log_category:s,restricted:o?"1":void 0},success:r?r:void 0,error:r?r:void 0})},log_for_category:function(t,e,n){return this.log(t,n,null,null,null,!1,e)},registerToLogClickEvent:function(e,n,r){return t(e).click((function(t){return function(){return t.log(n,null,null,null,!1,r)}})(this))}},E={start_times:{},start:function(t,e,n){return null==n&&(n=null),this.start_times[e]=n||Date.now()},stop:function(t,e,n,r){if(null==r&&(r=null),null!=this.start_times[e])return n.total_time=Date.now()-this.start_times[e],this.log(t,e,n,r),delete this.start_times[e]},log:function(t,e,r,i){var o;return null==i&&(i=null),r=r||{},o=T(i),n.SilentBackgroundRequest({url:"/ualogger",data:{platform:t,event_name:e,extra:JSON.stringify(r),for_uids:JSON.stringify(o)}})}},b={log:function(t,e,r,i){return n.SilentBackgroundRequest({url:"/virallogger",data:{user_ids:JSON.stringify(t),viral_type:e,action:r,extra:JSON.stringify(i||{})}})}},x={log:function(t,e,r){var i;return null==r&&(r=null),i=T(r),n.SilentBackgroundRequest({url:"/misclogger",data:{event_name:t,extra:JSON.stringify(e),for_uids:JSON.stringify(i)}})}},v={_log:function(t,e){return null==e&&(e={}),n.SilentBackgroundRequest({url:"/support_experiments_log",data:{event_name:t,extra:JSON.stringify(e)}})},log_file_restore:function(t){return this._log("file_restore",{ref:t})}},s=s=(function(){function t(t,e){this.context=null!=t?t:null,this.search_mode=null!=e?e:null,this._clear_buffers()}return t.prototype._clear_buffers=function(){return this.selection_buffer=[],this.timing_buffer=[],this.total_searches=0,this.slow_searches=0,this.downloading_time=null,this.downloaded_contacts=null},t.prototype.add_record=function(t){return t.deleted=!1,this.selection_buffer.push(t)},t.prototype.flag_record_as_removed=function(t){var e,n,r,i;for(i=this.selection_buffer,n=0,r=i.length;n<r;n++)if(e=i[n],e.contact_id===t&&!e.deleted)return void(e.deleted=!0)},t.prototype.add_timing_record=function(t){return this.timing_buffer.push(t)},t.prototype.count_search=function(t){if(this.total_searches+=1,t)return this.slow_searches+=1},t.prototype.add_downloading_stats=function(t){if(t)return this.downloading_time=t.downloading_time,this.downloaded_contacts=t.num_contacts},t.prototype.log_records=function(t,e,r){var i,o;return null==r&&(r=0),i={events:JSON.stringify(this.selection_buffer),canceled:e},(this.total_searches||this.timing_buffer.length)&&(o={context:this.context,search_mode:this.search_mode,total_searches:this.total_searches,slow_searches:this.slow_searches,downloading_time:this.downloading_time,downloaded_contacts:this.downloaded_contacts},i.total_contacts=r,i.timing_events=JSON.stringify(this.timing_buffer),i.session_summary=JSON.stringify(o)),n.SilentBackgroundRequest({url:"/contact_search_log",subject_user:t,data:i}),this._clear_buffers()},t})(),o={log:function(t){return n.SilentBackgroundRequest({url:"/comments_vortex_log",data:{event_name:t}})}},u={log:function(t){return n.SilentBackgroundRequest({url:"/legacy_sharing_vortex_log",data:{event_name:t}})}},A={BrowseActionsContextMenuLogger:i,CommentsVortexLogger:o,LegacySharingVortexLogger:u,ContactSearchLogger:s,UXAnalyticsLogger:S,ContentManagerActionsLogger:a,ProEventsLogger:d,FileViewLogger:c,LinkfileActivityLogger:_,MobileFilePreviewLogger:l,PreviewActivityLogger:p,SearchClientActivityLogger:h,SharedFolderActivityLogger:m,ShareTibEventLogger:f,SharingExperimentsLogger:g,ShmodelUILogger:w,SupportExperimentsWebLogger:v,TeamsWebActionsLogger:y,UserActivityLogger:E,ViralLogger:b,WebMiscActivityLogger:x},INLINE_JS.ShmodelUILogger=w,A})}.call(this),define("modules/clean/css",["require","exports","modules/clean/css_packages","modules/constants/css","modules/clean/static_urls","modules/core/exception","modules/core/uri"],function(t,e,n,r,i,o,s){"use strict";function a(t){return'url("'+String(t).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'")'}function c(t,e,n){o.assert(t.startsWith("/static/css/"),"invalid static css path: "+t);var r=p[t];null!=r&&(t=r);var s=w[t];return s||(s=new Promise(function(e,n){var r=document.createElement("link");return r.href=i.static_url(t),r.rel="stylesheet",r.type="text/css",r.crossorigin="anonymous",r.onload=function(){return v[t]=!0,e()},r.onerror=n,document.head.appendChild(r)}),w[t]=s),s.then(e,n)}function u(t,e,n){var r=t.map(function(t){return c(t)});return Promise.all(r).then(e,n)}function _(t){return t.every(function(t){return o.assert(t.startsWith("/static/css/"),"invalid static css path: "+t),!!v[p[t]||t]})}var l=r.ENABLE_CSS_PACKAGES?n.CSS_PACKAGES:{},p=Object.create(null);for(var d in l)if(l.hasOwnProperty(d))for(var h=l[d],f=0,m=h;f<m.length;f++){var g=m[f];p[g]=d}for(var w=Object.create(null),v=Object.create(null),y=document.querySelectorAll('link[rel="stylesheet"]'),S=0;S<y.length;S++){var E=y[S],b=s.parse(E.href).getPath();w[b]=Promise.resolve(),v[b]=!0}e.css_url=a,e.require_css=c,e.require_css_multi=u,e.is_loaded=_}),define("modules/clean/css_packages",["require","exports"],function(t,e){"use strict";e.CSS_PACKAGES={"/static/css/packaged/components-vflx47Eei.css":["/static/css/components/bubble_dropdown-vflTPbDJ3.css","/static/css/components/checkbox-vflYzUV74.css","/static/css/components/column-headers-vflwQf9xT.css","/static/css/components/input-vfl0ipzfz.css","/static/css/components/input_helpers-vfl1B2M2Y.css","/static/css/components/list_menu-vfltM8jWK.css","/static/css/components/loading_indicator-vflbadB1S.css","/static/css/components/locale_selector-vflRu24eh.css","/static/css/components/phone_number-vfl72g-xC.css","/static/css/components/select_input-vfl2lF1w1.css","/static/css/components/slider-vflbeTc0k.css","/static/css/components/sprite-div-vflfVxe3h.css","/static/css/components/tabs-vflVBuar6.css","/static/css/components/tooltip-vflnF5ZlX.css"]}}),define("modules/clean/devtools/perf_hub_action_types",["require","exports"],function(t,e){"use strict";e.ActionTypes={PROFILED_AJAX_LOAD_FINISHED:"PROFILED_AJAX_LOAD_FINISHED",WEB_TIMING_FETCHED:"WEB_TIMING_FETCHED"}}),define("modules/clean/devtools/perf_hub_actions",["require","exports","modules/clean/devtools/perf_hub_action_types","modules/clean/flux/dispatcher"],function(t,e,n,r){"use strict";var i=(function(){function t(){}return t.prototype.add_ajax_profile=function(t,e){return r.dispatch({type:n.ActionTypes.PROFILED_AJAX_LOAD_FINISHED,data:{xhr:t,url:e}})},t.prototype.add_web_timing_details=function(t){return r.dispatch({type:n.ActionTypes.WEB_TIMING_FETCHED,data:t})},t})();e.PerfHubActions=new i}),function(){define("modules/clean/em_string",[],function(){return(function(){function t(e){if(!(this instanceof t))return new t(e);this.s=e,this.info=this.widthInfo(),this.length=e.length?this.info[this.s.length-1]:0}return t.em_snippet=function(e,n,r){return null==n&&(n=50),null==r&&(r=.75),new t(e.toString()).snippet(n,r).toString()},t.prototype.widthInfo=function(){var t,e,n,r;for(n={},n[-1]=0,t=e=0,r=this.s.length;0<=r?e<r:e>r;t=0<=r?++e:--e)n[t]=n[t-1]+this.ems(this.s.charAt(t));return n},t.prototype.findSpot=function(t){var e,n,r,i;if(!t)return 0;for(i=0,n=this.s.length;i<=n;)if(r=Math.floor(i/2+n/2),e=this.info[r-1],e>t)n=r-1;else{if(!(e<t))return r;i=r+1}return i>r?i:r},t.prototype.ems=function(e){var n,r,i,o,s;return r=.65,n=1.08,i=.58,o=e.charCodeAt(0),s=t.CODEPOINT_TO_WIDTH[o],s?s/Math.pow(10,t.ACCURACY):768<=o&&o<=879?0:65377<=o&&o<=65500?i:11904<=o&&o<=40911||44032<=o&&o<=55215||4352<=o&&o<=4607||63744<=o&&o<=64255||65280<=o&&o<=65535||131072<=o&&o<=196607?n:r},t.prototype.substr=function(e,n){var r,i;return i=this.findSpot(e),null!=n?(r=this.findSpot(e+n),new t(this.s.substr(i,r-i))):new t(this.s.substr(i))},t.prototype.toString=function(){return this.s},t.prototype.snippet=function(e,n){var r,i,o,s,a;return null==e&&(e=50),null==n&&(n=.75),this.length<=e?this:(e-=t._ELLIPSIS_LENGTH,r=e*n,s=e-r,a=this.length-s,o=this.substr(0,r),i=this.substr(a),new t(o.toString()+"…"+i.toString()))},t.ACCURACY=2,t.CODEPOINT_TO_WIDTH={32:38,33:25,34:42,35:67,36:58,37:92,38:75,39:25,40:33,41:33,42:58,43:58,44:25,45:33,46:25,47:42,48:58,49:58,50:58,51:58,52:58,53:58,54:58,55:58,56:58,57:58,58:25,59:25,60:58,61:58,62:58,63:50,64:100,65:67,66:67,67:67,68:75,69:58,70:58,71:75,72:83,73:33,74:25,75:67,76:58,77:100,78:83,79:83,80:67,81:83,82:67,83:58,84:58,85:75,86:67,87:100,88:67,89:58,90:58,91:33,92:42,93:33,94:58,95:50,96:67,97:58,98:67,99:50,100:67,101:58,102:33,103:58,104:67,105:25,106:25,107:58,108:25,109:100,110:67,111:67,112:67,113:67,114:42,115:50,116:42,117:67,118:58,119:83,120:58,121:58,122:50,123:42,124:58,125:42,126:58,161:25,162:58,163:58,164:58,165:58,166:58,167:58,168:67,169:92,170:42,171:50,172:58,174:92,175:58,176:50,177:58,178:42,179:42,180:67,181:67,182:75,183:25,184:25,185:42,186:42,187:50,188:83,189:83,190:83,191:50,192:67,193:67,194:67,195:67,196:67,197:67,198:92,199:67,200:58,201:58,202:58,203:58,204:33,205:33,206:33,207:33,208:75,209:83,210:83,211:83,212:83,213:83,214:83,215:58,216:83,217:75,218:75,219:75,220:75,221:58,222:67,223:67,224:58,225:58,226:58,227:58,228:58,
229:58,230:92,231:50,232:58,233:58,234:58,235:58,236:25,237:25,238:25,239:25,240:67,241:67,242:67,243:67,244:67,245:67,246:67,247:58,248:67,249:67,250:67,251:67,252:67,253:58,254:67,255:58,256:75,257:67,258:75,259:67,260:75,261:67,262:75,263:58,264:75,265:58,266:75,267:58,268:75,269:58,270:83,271:83,272:83,273:75,274:67,275:67,276:67,277:67,278:67,279:67,280:67,281:67,282:67,283:67,284:83,285:75,286:83,287:75,288:83,289:75,290:83,291:75,292:83,293:75,294:92,295:75,296:33,297:33,298:33,299:33,300:33,301:33,302:33,303:33,304:33,305:25,306:67,307:67,308:42,309:33,310:75,311:67,312:67,313:58,314:33,315:58,316:33,317:58,318:42,319:58,320:50,321:67,322:42,323:83,324:75,325:83,326:75,327:83,328:75,329:83,330:83,331:75,332:92,333:67,334:92,335:67,336:92,337:67,338:100,339:100,340:75,341:50,342:75,343:50,344:75,345:50,346:67,347:58,348:67,349:58,350:67,351:58,352:67,353:58,354:75,355:42,356:75,357:42,358:75,359:42,360:83,361:75,362:83,363:75,364:83,365:75,366:83,367:75,368:83,369:75,370:83,371:75,372:100,373:92,374:75,375:58,376:75,377:67,378:67,379:67,380:67,381:67,382:67,383:42,384:75,385:83,386:67,387:75,388:75,389:67,390:75,391:83,392:58,393:83,394:100,395:67,396:75,397:67,398:67,399:75,400:58,401:58,402:75,403:83,404:75,405:100,406:50,407:50,408:75,409:67,410:50,411:67,412:117,413:83,414:75,415:92,416:92,417:75,418:117,419:100,420:75,421:75,422:75,423:67,424:58,425:67,426:58,427:42,428:75,429:42,430:75,431:83,432:75,433:92,434:83,435:75,436:75,437:67,438:67,439:67,440:67,441:58,442:58,443:75,444:75,445:58,446:50,447:67,448:33,449:50,450:50,451:33,452:142,453:142,454:133,455:100,456:92,457:67,458:117,459:117,460:100,461:75,462:67,463:33,464:33,465:92,466:67,467:83,468:75,469:83,470:75,471:83,472:75,473:83,474:75,475:83,476:75,477:67,478:75,479:67,480:75,481:67,482:100,483:100,484:92,485:75,486:83,487:75,488:75,489:67,490:92,491:67,492:92,493:67,494:67,495:58,496:33,497:142,498:142,499:133,500:83,501:75,502:117,503:67,504:83,505:75,506:75,507:67,508:100,509:100,510:92,511:67,512:75,513:67,514:75,515:67,516:67,517:67,518:67,519:67,520:33,521:33,522:33,523:33,524:92,525:67,526:92,527:67,528:75,529:50,530:75,531:50,532:83,533:75,534:83,535:75,536:67,537:58,538:75,539:42,540:58,541:58,542:83,543:75,544:83,545:100,546:92,547:67,548:67,549:67,550:75,551:67,552:67,553:67,554:92,555:67,556:92,557:67,558:92,559:67,560:92,561:67,562:75,563:58,564:67,565:100,566:67,567:33,568:100,569:100,570:75,571:75,572:58,573:58,574:67,575:58,576:58,577:67,578:50,579:75,580:75,581:75,582:75,583:58,584:58,585:25,586:83,587:58,588:75,589:33,590:75,591:58,880:67,881:50,882:67,883:50,884:33,885:33,886:75,887:67,888:108,889:108,890:67,891:58,892:58,893:58,894:42,895:108,896:108,897:108,898:108,899:108,900:67,901:67,902:75,903:42,904:83,905:100,906:58,907:108,908:100,909:108,910:100,911:100,912:42,913:75,914:67,915:58,916:83,917:67,918:67,919:83,920:92,921:33,922:75,923:75,924:100,925:83,926:75,927:92,928:83,929:67,930:108,931:67,932:75,933:75,934:83,935:75,936:83,937:92,938:33,939:75,940:83,941:58,942:75,943:42,944:67,945:83,946:67,947:67,948:67,949:58,950:75,951:75,952:67,953:42,954:67,955:67,956:75,957:67,958:67,959:67,960:92,961:67,962:67,963:75,964:67,965:67,966:92,967:67,968:92,969:100,970:42,971:67,972:67,973:67,974:100,975:108,976:58,977:75,978:75,979:100,980:75,981:92,982:100,983:67,984:92,985:67,986:75,987:58,988:58,989:58,990:67,991:58,992:75,993:92,994:100,995:92,996:75,997:58,998:75,999:58,1e3:75,1001:75,1002:67,1003:67,1004:83,1005:58,1006:50,1007:42,1008:67,1009:67,1010:58,1011:33,1012:92,1013:58,1014:58,1015:67,1016:67,1017:75,1018:100,1019:83,1020:58,1021:75,1022:75,1023:75,1024:67,1025:67,1026:92,1027:58,1028:75,1029:67,1030:33,1031:33,1032:42,1033:108,1034:108,1035:83,1036:75,1037:83,1038:75,1039:83,1040:75,1041:67,1042:67,1043:58,1044:83,1045:67,1046:92,1047:67,1048:83,1049:83,1050:75,1051:83,1052:100,1053:83,1054:92,1055:83,1056:67,1057:75,1058:75,1059:75,1060:83,1061:75,1062:83,1063:75,1064:108,1065:108,1066:75,1067:92,1068:67,1069:75,1070:108,1071:75,1072:67,1073:67,1074:58,1075:58,1076:75,1077:67,1078:83,1079:58,1080:75,1081:75,1082:67,1083:67,1084:83,1085:75,1086:67,1087:75,1088:75,1089:58,1090:58,1091:58,1092:92,1093:67,1094:75,1095:58,1096:92,1097:100,1098:67,1099:83,1100:58,1101:58,1102:92,1103:58,1104:67,1105:67,1106:75,1107:58,1108:58,1109:58,1110:33,1111:33,1112:42,1113:92,1114:92,1115:75,1116:67,1117:75,1118:58,1119:75,1120:100,1121:75,1122:75,1123:67,1124:83,1125:83,1126:75,1127:67,1128:100,1129:92,1130:92,1131:83,1132:117,1133:108,1134:67,1135:67,1136:83,1137:83,1138:92,1139:67,1140:83,1141:67,1142:83,1143:67,1144:133,1145:125,1146:92,1147:67,1148:100,1149:75,1150:100,1151:75,1152:75,1153:58,1154:75,1155:0,1156:0,1157:0,1158:0,1159:108,1160:0,1161:0,1162:83,1163:75,1164:67,1165:58,1166:67,1167:75,1168:58,1169:58,1170:67,1171:58,1172:75,1173:67,1174:100,1175:92,1176:67,1177:58,1178:75,1179:67,1180:83,1181:75,1182:75,1183:67,1184:83,1185:75,1186:83,1187:75,1188:100,1189:83,1190:117,1191:100,1192:92,1193:75,1194:75,1195:58,1196:75,1197:58,1198:75,1199:58,1200:75,1201:58,1202:75,1203:75,1204:100,1205:83,1206:75,1207:67,1208:75,1209:67,1210:75,1211:58,1212:92,1213:75,1214:92,1215:75,1216:33,1217:92,1218:83,1219:75,1220:67,1221:83,1222:67,1223:83,1224:75,1225:83,1226:75,1227:75,1228:58,1229:100,1230:83,1231:25,1232:75,1233:67,1234:75,1235:67,1236:100,1237:100,1238:67,1239:67,1240:75,1241:67,1242:75,1243:67,1244:92,1245:83,1246:67,1247:58,1248:67,1249:58,1250:83,1251:75,1252:83,1253:75,1254:92,1255:67,1256:92,1257:67,1258:92,1259:67,1260:75,1261:58,1262:75,1263:58,1264:75,1265:58,1266:75,1267:58,1268:75,1269:58,1270:58,1271:42,1272:92,1273:83,1274:58,1275:42,1276:75,1277:58,1278:75,1279:58,2026:67,19977:108,65403:58},t._ELLIPSIS_LENGTH=new t("…").length,t})()})}.call(this),define("modules/clean/event_handler",["require","exports","jquery"],function(t,e,n){"use strict";function r(t){var n=t.prototype.componentWillMount,r=t.prototype.componentWillUnmount;t.prototype.componentWillMount=function(){e.EventHandlerMixin.componentWillMount.apply(this),n&&"function"==typeof n&&n.apply(this)},t.prototype.componentWillUnmount=function(){r&&"function"==typeof r&&r.apply(this),e.EventHandlerMixin.componentWillUnmount.apply(this)}}e.eventHandler=r,e.EventHandlerMixin={componentWillMount:function(){this.events=new i},componentWillUnmount:function(){this.events.removeAll()}};var i=(function(){function t(){}return t.prototype.on=function(t,e,r,i,o){"string"!=typeof r&&(o=i,i=r,r=void 0),o&&(i=n.proxy(i,o)),this.handlers||(this.handlers=[]),t=n(t),r?t.on(e,r,i):t.on(e,i),this.handlers.push({element:t,event:e,selector:r,callback:i})},t.prototype.removeAll=function(){this.handlers&&(this.handlers.forEach(function(t){t.selector?t.element.off(t.event,t.selector,t.callback):t.element.off(t.event,t.callback)}),this.handlers=null)},t})();e.EventHandler=i}),function(){define("modules/clean/event_load",[],function(){var t,e;return t=function(t){return window.setTimeout(function(){return t.apply(t)},0)},e=function(e){return"complete"===document.readyState?t(e):null!=window.attachEvent?window.attachEvent("onload",e):null!=window.addEventListener?window.addEventListener("load",e,!1):void 0},{window_load:e}})}.call(this),define("modules/clean/filepath",["require","exports"],function(t,e){"use strict";function n(t){return t?("/"!==t.charAt(0)&&(t="/"+t),"/"===t.charAt(t.length-1)?t.substr(0,t.length-1):t):""}function r(t,e){return n(t).toLowerCase()===n(e).toLowerCase()}function i(t,e){t=n(t);var r=t.split("/"),i=r.pop();return i?i:e||"Dropbox"}function o(t){return t.indexOf(".")===-1?t:t.split(".").slice(0,-1).join(".")}function s(t){var e=t.split("."),n=t.length>0&&"."===t[0],r=t.indexOf(".")<0;n&&(r=e.length<=2);var i=e.pop();return i&&!r?i.toLowerCase():""}function a(t){return t.indexOf(".")===-1?"":s(t).toLowerCase()}function c(t,n){switch(void 0===n&&(n=e.ICON_SIZES.SMALL),n){case e.ICON_SIZES.LARGE:return t+"_32";case e.ICON_SIZES.XLARGE:return t+"_64";default:return t}}function u(t,e){var n=(void 0===e?{}:e).size;return c(h[t]||"page_white",n)}function _(t,e){var n=(void 0===e?{}:e).size;return u(s(t).toLowerCase(),{size:n})}function l(t){return t.split("/").slice(0,-1).join("/")||"/"}function p(t){return"s_web_"+d({isInTeamFolderTree:t})}function d(t){var n=void 0===t?{}:t,r=n.isShared,i=void 0!==r&&r,o=n.isDeleted,s=void 0!==o&&o,a=n.isTeamFolder,u=void 0!==a&&a,_=n.isInTeamFolderTree,l=void 0!==_&&_,p=n.isViewOnly,d=void 0!==p&&p,h=n.size,f=void 0===h?e.ICON_SIZES.LARGE:h,m="";u?m="_team":(i||l)&&(m="_user");var g="";d&&""!==m&&(g="_locked");var w="";return s&&(w="_gray"),c("folder"+m+g+w,f)}e.normalize=n,e.paths_are_equal=r,e.filename=i,e.filename_without_extension=o,e.file_extension=s,e.file_extension_for_logging=a;var h={_other:"page_white",log:"page_white",msg:"page_white",sln:"page_white",vcproj:"page_white",txt:"page_white_text",wps:"page_white_text",doc:"page_white_word",docx:"page_white_word",docm:"page_white_word",rtf:"page_white_word",pages:"page_white_word",wpd:"page_white_word",odt:"page_white_word",pdf:"page_white_acrobat",eps:"page_white_acrobat",xls:"page_white_excel",xlsm:"page_white_excel",xlsx:"page_white_excel",xlsb:"page_white_excel",ods:"page_white_excel",csv:"page_white_excel",ppt:"page_white_powerpoint",pptx:"page_white_powerpoint",pptm:"page_white_powerpoint",pps:"page_white_powerpoint",ppsx:"page_white_powerpoint",ppsm:"page_white_powerpoint",odp:"page_white_powerpoint",key:"page_white_keynote",css:"page_white_code",html:"page_white_code",htm:"page_white_code",xml:"page_white_code",php:"page_white_code",c:"page_white_code",h:"page_white_code",rb:"page_white_code",cpp:"page_white_code",java:"page_white_code",js:"page_white_code",json:"page_white_code",cs:"page_white_code",py:"page_white_code",pl:"page_white_code",exe:"page_white_gear",dll:"page_white_gear",app:"page_white_gear",mp3:"page_white_sound",m3u:"page_white_sound",wav:"page_white_sound",m4a:"page_white_sound",wma:"page_white_sound",aif:"page_white_sound",iff:"page_white_sound",mid:"page_white_sound",mpa:"page_white_sound",ra:"page_white_sound",aiff:"page_white_sound",amr:"page_white_sound",ogg:"page_white_sound","3ga":"page_white_sound",aac:"page_white_sound",oga:"page_white_sound",gif:"page_white_picture",png:"page_white_picture",jpg:"page_white_picture",jpeg:"page_white_picture",tiff:"page_white_picture",tif:"page_white_picture",bmp:"page_white_picture",odg:"page_white_picture","3fr":"page_white_picture",ari:"page_white_picture",arw:"page_white_picture",srf:"page_white_picture",sr2:"page_white_picture",bay:"page_white_picture",crw:"page_white_picture",cr2:"page_white_picture",cap:"page_white_picture",eip:"page_white_picture",dcs:"page_white_picture",dcr:"page_white_picture",drf:"page_white_picture",k25:"page_white_picture",kdc:"page_white_picture",dng:"page_white_picture",erf:"page_white_picture",fff:"page_white_picture",iiq:"page_white_picture",mef:"page_white_picture",mos:"page_white_picture",mrw:"page_white_picture",nef:"page_white_picture",nrw:"page_white_picture",orf:"page_white_picture",pef:"page_white_picture",ptx:"page_white_picture",pxn:"page_white_picture",r3d:"page_white_picture",raf:"page_white_picture",rw2:"page_white_picture",raw:"page_white_picture",rwl:"page_white_picture",rwz:"page_white_picture",obm:"page_white_picture",srw:"page_white_picture",x3f:"page_white_picture",svg:"page_white_picture",asf:"page_white_film",avi:"page_white_film",flv:"page_white_film",mov:"page_white_film",mp4:"page_white_film",mkv:"page_white_film",wmv:"page_white_film",mpg:"page_white_film","3gp":"page_white_film","3gpp":"page_white_film",m4v:"page_white_film",vob:"page_white_film",ogv:"page_white_film",gz:"page_white_compressed",tar:"page_white_compressed",rar:"page_white_compressed",zip:"page_white_compressed",tgz:"page_white_compressed",bz2:"page_white_compressed",iso:"page_white_dvd",dmg:"page_white_dvd",ai:"page_white_vector",psd:"page_white_paint",au:"page_white_sound",fla:"page_white_flash",swf:"page_white_flash",url:"page_white_linkfile",webloc:"page_white_linkfile",website:"page_white_linkfile"};e.ICON_SIZES={SMALL:"SMALL",LARGE:"LARGE",XLARGE:"XLARGE"},e.extension_icon=u,e.file_icon=_,e.parent_dir=l,e.new_folder_icon=p,e.folder_icon=d}),function(){"use strict";var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("modules/clean/flux/dispatcher",["external/flux","modules/core/exception"],function(e,n){var r;return r=!1,new((function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.dispatch=function(t){var e;n.assert(!r,"Invariant error: cannot dispatch during dispatch."),n.assert(null!=t.type,"Invariant error: cannot dispatch action without 'type' property."),r=!0;try{"function"==typeof this.dispatch_begin&&this.dispatch_begin();try{return i.__super__.dispatch.call(this,{action:t})}catch(t){return e=t,n.reportException({err:e}),console.error(e)}finally{"function"==typeof this.dispatch_end&&this.dispatch_end()}}finally{r=!1}},i})(e.Dispatcher))})}.call(this),function(){define("modules/clean/fuzzy",[],function(){var t;return t={simpleFilter:function(e,n){return n.filter(function(n){return t.test(e,n)})},test:function(e,n){return null!==t.match(e,n)},match:function(t,e,n){var r,i,o,s,a,c,u,_,l,p,d,h,f;for(n=n||{},_=0,h=[],u=e.length,f=0,a=0,p=n.pre||"",l=n.post||"",i=n.caseSensitive&&e||e.toLowerCase(),r=void 0,void 0,t=n.caseSensitive&&t||t.toLowerCase(),c=0,d=[],o=0,s=0;c<u;)r=e[c],i[c]===t[_]?(r=p+r+l,s?s+=1:(o=c,s=1),_+=1,a+=1+a):(a=0,s&&(d.push([o,s]),s=0)),f+=a,h[h.length]=r,c++;return s&&d.push([o,s]),_===t.length?{highlighted:d,rendered:h.join(""),score:f}:null},filter:function(t,e,n){var r,i;return null==n&&(n={}),i=[],r=this._reduce.bind(this,t,n),e.reduce(r,i).sort(this._sort)},_reduce:function(e,n,r,i,o){var s,a;return a=i,n.extract&&(a=n.extract(i)),s=t.match(e,a,n),null!=s&&r.push({string:s.rendered,score:s.score,index:o,original:i}),r},_sort:function(t,e){var n;return n=e.score-t.score,n?n:t.index-e.index}}})}.call(this),function(){define("modules/clean/job_progress",["jquery","modules/core/dom"],function(t,e){var n,r,i;return i={make:function(e,n){var r,i,o,s,a,c,u;return null==n&&(n=300),u=n.toString()+"px",o=t("<div />",{class:"outer-progress-bar"}).css({width:u}),r=t("<div />",{class:"inner-progress-bar",id:"pb_"+e}).css({width:u}),a=t("<div />",{class:"under-pb progress-bar"}).css({width:u}),s=t("<div />",{class:"over-pb progress-bar",id:"pb_"+e+"_over"}).css({display:"none"}),c=t("<div />",{class:"pb-percentage",id:"pb_"+e+"_upct"}).css({width:u}),i=t("<div />",{class:"pb-percentage",id:"pb_"+e+"_opct"}).css({width:u}),a.append(c),s.append(i),r.append(a),r.append(s),o.append(r),s.data("progress-width",n),o},set:function(e,n){var r,i,o,s;if(r=t("#pb_"+e+"_over"))return i=n.split("/").map(Number),n=i.length>1?i[0]/i[1]:i[0],n=isNaN(n)?0:n,o=100*Math.min(n,1),s=String(o)+"%",r.show(),r.css({backgroundColor:"#348DD3",overflow:"hidden",width:s})}},n={complete:{},handled:function(t){var e;return!!t&&(e=!!n.complete[t],n.complete[t]=!0,e)},peek:function(t){return!!t&&!!n.complete[t]}},r={show:function(n){var r,o,s,a,c,u,_,l;if(n&&(null!=(_=__CONDITIONAL_JS__.DBModalStack)&&null!=(l=_.top())&&l.hide(),r=t("body"),o=t("<div />",{id:"modal-progress-overlay"}),o.hide(),o.appendTo(r),t("#browse-box").length?e.clone_position(o,t("#browse-box")):t("#gallery-view-media").length?e.clone_position(o,t("#gallery-view-media")):o.css({position:"fixed",width:"100%",height:"100%"}),o.width()))return c=t("<div />",{id:"modal-progress-content"}),a=t("<div />",{id:"modal-progress-container"}),s=t("<div />",{id:"modal-progress-bar",opacity:1,html:i.make("modal-progress",150,"")}),u=t("<div />",{id:"modal-progress-text",text:n}),c.hide(),a.append(s,u),c.append(a),r.append(c),o.fadeTo(250,.7),c.fadeIn(250)},update:function(t){var e;if(e="progress",!(t.indexOf(e)>-1&&(t=t.substring(e.length),isNaN(t))))return i.set("modal-progress",t)},hide:function(){return t("#modal-progress-overlay").fadeOut(250,function(){return t("#modal-progress-overlay").remove()}),t("#modal-progress-content").fadeOut(250,function(){return t("#modal-progress-content").remove()})}},{ModalProgress:r,Job:n}})}.call(this),define("modules/clean/js_basic_stopwatch",["require","exports","modules/core/exception"],function(t,e,n){"use strict";function r(t,n,r,i){return o?new a(t,n,r,i):e.NoopStopwatchInstance}var i,o=!(!window.performance||!window.performance.now),s=0;(function(t){t[t.Span=1]="Span",t[t.AsyncSpan=2]="AsyncSpan",t[t.Trace=3]="Trace"})(i=e.TimingDataType||(e.TimingDataType={}));var a=(function(){function t(t,e,n,r){this.stopwatchName=t,this.strictAssert=e,this.reportSpanFn=n,this.activeSpans={},this.spanStack=[this.stopwatchName],this.stopwatchTags=r||[]}return t.prototype.reset=function(){this.activeSpans={},this.spanStack=[this.stopwatchName]},t.prototype.newSpanID=function(){var t=String(s);return s++,t},t.prototype._resolveTime=function(t){return void 0===t&&(t=window.performance.now()),Math.round(t)},t.prototype._resolveParent=function(t){if(t.type!==i.Span)return void(t.parent=this.stopwatchName+"#");var e=this.spanStack[this.spanStack.length-1];if(e)if(e!==t.name)this._report_sw_misuse("Closing "+e+" while the latest open span is "+t.name+".\n        You are either mixing sync and async spans or closing sync spans out of order.");else{this.spanStack.pop();for(var n="",r=0,o=this.spanStack;r<o.length;r++){var s=o[r];n+=s+"#"}t.parent=n}else this._report_sw_misuse(t.name+' isn\'t a synchronous span and has to be started with "async:true".')},t.prototype.recordTrace=function(t,e){void 0===e&&(e={});var n=this._resolveTime(e.traceTime),r=this.newSpanID(),o={name:t,span_id:r,start_time:0,end_time:n,annotations:{},type:i.Trace,parent:this.stopwatchName+"#"};return this.reportSpanFn&&this.reportSpanFn(this.stopwatchName,this.stopwatchTags,o),r},t.prototype.start=function(t,e){void 0===e&&(e={}),t||this._report_sw_misuse("Reporting a span without a name");var n=this._resolveTime(e.startTime);e.async||this.spanStack.push(t);var r=this.newSpanID(),o={name:t,span_id:r,start_time:n||0,annotations:{},type:e.async?i.AsyncSpan:i.Span};return t in this.activeSpans||(this.activeSpans[t]=[]),this.activeSpans[t].push(o),r},t.prototype.end=function(t,e){void 0===e&&(e={});var n=this.findTimerDataIndex(t,e.spanId);if(n!==-1){var r=this.activeSpans[t],i=r[n];r.splice(n,1),this._resolveParent(i);var o=this._resolveTime(e.endTime);return o<i.start_time?void this._report_sw_misuse("span "+t+" has set an endTime earlier than start_time"):(i.end_time=o,this.reportSpanFn&&this.reportSpanFn(this.stopwatchName,this.stopwatchTags,i),i.span_id)}},t.prototype.addSpanAnnotation=function(t,e,n,r){var i=this.findTimerDataIndex(t,r);if(i!==-1){this.activeSpans[t][i].annotations[e]=n}},t.prototype.findTimerDataIndex=function(t,e){if(!(t in this.activeSpans)||0===this.activeSpans[t].length)return this._report_sw_misuse("tried to find "+t+" but that span doesn't exist"),-1;var n=-1,r=this.activeSpans[t];if(void 0===e)n=0;else for(var i=0;i<r.length;i++)if(r[i].span_id===e){n=i;break}return n===-1&&this._report_sw_misuse("tried to find "+t+" with id "+e+" but that span doesn't exist"),n},t.prototype._report_sw_misuse=function(t){t="JSBasicStopwatch "+this.stopwatchName+": "+t,this.strictAssert?n.assert(!1,t):n.reportStack(t,{severity:n.SEVERITY.NONCRITICAL,tags:["log_js_stopwatch"]})},t})();e.JSBasicStopwatchImpl=a;var c=(function(){function t(){}return t.prototype.reset=function(){},t.prototype.start=function(t,e){void 0===e&&(e={})},t.prototype.end=function(t,e){void 0===e&&(e={})},t.prototype.recordTrace=function(t,e){void 0===e&&(e={})},t.prototype.addSpanAnnotation=function(t,e,n,r){},t})();e.NoopStopwatchInstance=new c,e.createStopwatch=r}),define("modules/clean/js_client_stopwatch",["require","exports","modules/core/xhr","modules/clean/js_basic_stopwatch","modules/constants/request","modules/core/browser","modules/core/exception"],function(t,e,n,r,i,o,s){"use strict";var a=(function(){function t(){var t=this;this.GLOBAL_SW_NAME="GLOBAL_STOPWATCH",this.flush_interval=6e4,this.strictAssert=!1,this.intervalId=null,this._report_span_fn=function(e,n,i){e in t.storedAggregates||(t.storedAggregates[e]={});var o=t.storedAggregates[e],s=""+i.parent+i.name;s in o||(o[s]={name:i.name,start_time:i.start_time,total_time:0,num_calls:0,annotations:{},parent:i.parent||"",stopwatch_tags:n,type:i.type});var a=o[s];if(void 0===i.end_time)return void t._report_sw_misuse("Span "+s+" reported with undefined end_time");a.type===r.TimingDataType.Trace?(a.total_time=i.end_time-i.start_time,a.num_calls=1):(a.total_time+=i.end_time-i.start_time,a.num_calls+=1);for(var c in i.annotations)i.annotations.hasOwnProperty(c)&&(a.annotations[c]=i.annotations[c])},this.reset()}return t.prototype.reset=function(){this.stopwatches={},this.sentInitialData=!1,this.create_stopwatch(this.GLOBAL_SW_NAME),this.storedAggregates={},this.intervalId&&clearInterval(this.intervalId),this.intervalId=null},t.prototype.reset_individual_stopwatch=function(t){if(!this.stopwatch_exists(t))return void this._report_sw_misuse("tried to reset the stopwatch "+t+" but it does not exist");this.stopwatches[t].reset()},t.prototype.stopwatch_exists=function(t){return t in this.stopwatches},t.prototype.create_stopwatch=function(t,e){if(this.stopwatch_exists(t))return void this._report_sw_misuse("tried to create a new stopwatch "+t+" but it already exists");this.stopwatches[t]=r.createStopwatch(t,this.strictAssert,this._report_span_fn,e)},t.prototype.create_stopwatch_if_not_exist=function(t,e){this.stopwatch_exists(t)||this.create_stopwatch(t,e)},t.prototype.getStopwatch=function(t){return this.stopwatch_exists(t)?this.stopwatches[t]:(this._report_sw_misuse(t+" doesn't exist"),null)},t.prototype.recordTrace=function(t,e){void 0===e&&(e={});var n=this.getStopwatch(e.stopwatchName||this.GLOBAL_SW_NAME);if(null!=n){var r={traceTime:e.traceTime};return n.recordTrace(t,r)}},t.prototype.startSpan=function(t,e){void 0===e&&(e={});var n=this.getStopwatch(e.stopwatchName||this.GLOBAL_SW_NAME);if(null!=n){var r={startTime:e.startTime,async:e.async};return n.start(t,r)}},t.prototype.endSpan=function(t,e){void 0===e&&(e={});var n=this.getStopwatch(e.stopwatchName||this.GLOBAL_SW_NAME);if(null!=n)return n.end(t,{spanId:e.spanId,endTime:e.endTime})},t.prototype.addSpanAnnotation=function(t,e,n,r){void 0===r&&(r={});var i=this.getStopwatch(r.stopwatchName||this.GLOBAL_SW_NAME);null!=i&&i.addSpanAnnotation(t,e,n,r.spanId)},t.prototype.log_stored_results=function(){if(this.sentInitialData)return void this._report_sw_misuse("ClientStopwatch tried to log stored results, but the stopwatch is set to log immediately");this.flush_current_data(),this.sentInitialData=!0,this.intervalId=setInterval(this.flush_current_data.bind(this),this.flush_interval)},t.prototype._report_sw_misuse=function(t){t="ClientStopwatch: "+t,this.strictAssert?s.assert(!1,t):s.reportStack(t,{severity:s.SEVERITY.NONCRITICAL,tags:["log_js_stopwatch"]})},t.prototype.flush_current_data=function(){if(Object.keys(this.storedAggregates).length>0){var t=JSON.stringify(this.storedAggregates);this.storedAggregates={};var e={request_id:i.REQUEST_ID,url:o.get_href(),aggregated_sw_data:t};n.sendXhr("/log_js_sw_data",e)}},t.prototype.print_stopwatches_debug=function(){for(var t=this.get_debug_data(),e=0,n=t;e<n.length;e++){var i=n[e];console.debug("============================"),console.debug(i.name);for(var o=0,s=void 0,a=0,c=i.spans;a<c.length;a++){var u=c[a],_=u.parent.split("#").length-2,l="";if(u.type!==s&&(console.debug("-----------------------------"),s=u.type),u.type===r.TimingDataType.AsyncSpan)l="(async)";else if(u.type===r.TimingDataType.Trace)l="(trace)";else for(var p=0;p<_;p++)l+="-";for(var d=l+u.name,h="",p=0;p<60-d.length;p++)h+=" ";var f=d.length<60?d+h:d.substring(0,57)+"...",m=u.totalTime+"ms";u.type===r.TimingDataType.Trace?m+=" (split: "+(u.totalTime-o)+"ms)":u.type===r.TimingDataType.Span&&(m+=" (own: "+u.ownTime+")"),o=u.totalTime;var g=f+m;console.debug(g)}}},t.prototype.get_debug_data=function(){var t=[];for(var e in this.storedAggregates)if(this.storedAggregates.hasOwnProperty(e)){var n=this.storedAggregates[e],i=[],o=[],s=[],a={};for(var c in n)if(n.hasOwnProperty(c)){var u=n[c];a[u.parent]||(a[u.parent]=[]),a[u.parent].push(u),u.type===r.TimingDataType.Trace?o.push(c):u.type===r.TimingDataType.AsyncSpan?s.push(c):i.push(c)}var _=[];i.sort();for(var l=i.concat(s).concat(o),p=0,d=l;p<d.length;p++){var h=d[p],f=n[h],m=a[h+"#"],g=0;if(m)for(var w=0,v=m;w<v.length;w++){var y=v[w];g+=y.total_time}_.push({name:f.name,parent:f.parent,ownTime:f.total_time-g,totalTime:f.total_time,type:f.type})}_.length>0&&t.push({name:e,spans:_})}return t},t})();e.JSStopwatch=new a}),function(){define("modules/clean/js_environment",[],function(){return{isBrowser:function(){return"undefined"!=typeof window&&null!==window},isTest:function(){return"undefined"!=typeof jasmine&&null!==jasmine}}})}.call(this),define("modules/clean/keycode",["require","exports"],function(t,e){"use strict";(function(t){t[t.A=65]="A",t[t.BACKSPACE=8]="BACKSPACE",t[t.TAB=9]="TAB",t[t.ENTER=13]="ENTER",t[t.SHIFT=16]="SHIFT",t[t.CONTROL=17]="CONTROL",t[t.ALT=18]="ALT",t[t.ESC=27]="ESC",t[t.SPACE=32]="SPACE",t[t.PAGE_UP=33]="PAGE_UP",t[t.PAGE_DOWN=34]="PAGE_DOWN",t[t.END=35]="END",t[t.HOME=36]="HOME",t[t.LEFT=37]="LEFT",t[t.UP=38]="UP",t[t.RIGHT=39]="RIGHT",t[t.DOWN=40]="DOWN",t[t.INSERT=45]="INSERT",t[t.DELETE=46]="DELETE",t[t.TWO_KEY=50]="TWO_KEY",t[t.EQUALS=61]="EQUALS",t[t.COMMAND=91]="COMMAND",t[t.PLUS_EQUALS_FF=107]="PLUS_EQUALS_FF",t[t.MINUS_FF=109]="MINUS_FF",t[t.F1=112]="F1",t[t.F2=113]="F2",t[t.F3=114]="F3",t[t.F4=115]="F4",t[t.F5=116]="F5",t[t.F6=117]="F6",t[t.F7=118]="F7",t[t.F8=119]="F8",t[t.F9=120]="F9",t[t.F10=121]="F10",t[t.F11=122]="F11",t[t.F12=123]="F12",t[t.PLUS_EQUALS_FF_GERMAN=171]="PLUS_EQUALS_FF_GERMAN",t[t.MINUS_FF_MAC=173]="MINUS_FF_MAC",t[t.PLUS_CHROME=187]="PLUS_CHROME",t[t.MINUS_CHROME=189]="MINUS_CHROME",t[t.FORWARD_SLASH=191]="FORWARD_SLASH",t[t.AT_SIGN=64]="AT_SIGN",t[t.PROCESSING=229]="PROCESSING"})(e.KeyCode||(e.KeyCode={}))}),define("modules/clean/loggers/cache_logger",["require","exports","modules/constants/request","modules/clean/ajax","modules/core/browser"],function(t,e,n,r,i){"use strict";function o(){if(!a&&(a=!0,window.caches)){var t=[];window.caches.keys().then(function(e){return Promise.all(e.map(function(e){return window.caches.open(e).then(function(t){return t.keys()}).then(function(e){for(var n=0,r=e;n<r.length;n++){var i=r[n];t.push(i.url)}})}))}).then(function(){r.SilentBackgroundRequest({url:"/log/service_worker_cache",data:{request_id:n.REQUEST_ID,routes_cached:JSON.stringify(t)}})})}}function s(){if(!c&&(c=!0,window.localStorage&&window.ensemble&&window.ensemble.getCacheInfo)){for(var t=i.get_uri(),e=t.getScheme()+"://"+t.getAuthority(),o=[],s=0;s<window.localStorage.length;s++){var a=window.localStorage.key(s);if(a&&a.startsWith("ensembleCache")){var u=a.split("_");if(!(u.length<1)&&u[1].startsWith("/")){var _=u[1];o.push(e+_)}}}var l=[],p=[],d=window.ensemble.getCacheInfo();for(var h in d)if(h.startsWith("/")){var f=e+h;l.push(f),d[h].isCacheHit&&p.push(f)}r.SilentBackgroundRequest({url:"/log/ensemble_cache",data:{request_id:n.REQUEST_ID,routes_cached:JSON.stringify(o),cache_hits:JSON.stringify(p),all_pagelets:JSON.stringify(l)}})}}var a=!1;e.logSWCacheData=o;var c=!1;e.logEnsembleCacheData=s}),define("modules/clean/loggers/pagelet_perf",["require","exports","modules/clean/js_client_stopwatch"],function(t,e,n){"use strict";function r(){c||(c=!0,window.ensemble&&window.performance&&window.performance.getEntriesByType&&window.performance.timing&&(o(),a(),s()))}function i(t,e){n.JSStopwatch.create_stopwatch_if_not_exist(t);for(var r in e)e[r]<0||n.JSStopwatch.recordTrace(r,{stopwatchName:t,traceTime:e[r]})}function o(){for(var t,e=performance.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){var o=r[n];if(o.name.indexOf("dropbox.com/pagelet/")!==-1&&o.name.indexOf("navigation_menu")===-1&&o.name.indexOf("header")===-1){t=o;break}}if(t){i("embedded_app_pagelet_network",{connect_time:t.connectEnd-t.connectStart,dns_time:t.domainLookupEnd-t.domainLookupEnd,request_start_to_first_byte:t.responseStart-t.requestStart,request_start_to_last_byte:t.responseEnd-t.requestStart})}}function s(){var t=window.performance.timing;if(!(t.fetchStart<t.navigationStart||t.connectStart<t.navigationStart||t.connectEnd<t.navigationStart||t.requestStart<t.navigationStart||t.responseStart<t.navigationStart)){for(var e=[["browser_time",t.fetchStart-t.navigationStart],["dns_time",t.connectStart-t.navigationStart],["tcp_ssl_time",t.connectEnd-t.navigationStart],["request_start",t.requestStart-t.navigationStart],["first_byte",t.responseStart-t.navigationStart],["response_end",t.responseEnd-t.navigationStart]],n={},r=0,o=e;r<o.length;r++){var s=o[r];n[s[0]]=s[1]}i("browser_perf",n)}}function a(){n.JSStopwatch.create_stopwatch_if_not_exist("performance_marks");for(var t=window.performance.getEntriesByType("mark"),e=0,r=t;e<r.length;e++){var i=r[e];n.JSStopwatch.recordTrace(i.name,{stopwatchName:"performance_marks",traceTime:i.startTime})}}var c=!1;e.logPageletPerf=r}),define("modules/clean/pagelet_logger",["require","exports","modules/core/browser","modules/clean/js_client_stopwatch","modules/clean/web_timing_logger"],function(t,e,n,r,i){"use strict";var o=(function(){function t(t,e,i,o){void 0===e&&(e=[]),void 0===i&&(i=!1),void 0===o&&(o={});var s=this;if(this.pageletName=t,i){var a=n.performance();a&&a.now&&(this.performance=a,this.stopwatchName=this.pageletName+"_client_logging",r.JSStopwatch.create_stopwatch_if_not_exist(this.stopwatchName))}else this.stopwatchName=void 0;this.ttiComponents=[],e.map(function(t){s.ttiComponents.push({name:t,isReady:!1})}),this.ttiMarked=!1,this.extraColumns=o}return t.prototype.componentReady=function(t){if(!this.ttiMarked){for(var e=!1,n=0;n<this.ttiComponents.length;++n)this.ttiComponents[n].name!==t||this.ttiComponents[n].isReady?this.ttiComponents[n].isReady||(e=!0):(this.ttiComponents[n].isReady=!0,r.JSStopwatch.recordTrace(t+"_since_start",{stopwatchName:this.stopwatchName}));e||(i.mark_time_to_interactive(this.extraColumns),this.ttiMarked=!0)}},Object.defineProperty(t.prototype,"ttiLogged",{get:function(){return this.ttiMarked},enumerable:!0,configurable:!0}),t})();e.PageletLogger=o}),define("modules/clean/react_logger",["require","exports","tslib","external/react","modules/clean/js_client_stopwatch","modules/constants/webtiming","modules/core/exception"],function(t,e,n,r,i,o,s){"use strict";function a(t){if(!t){var e="ReactLogger can't be used with an empty span name";s.reportStack(e,{severity:s.SEVERITY.NONCRITICAL,tags:["log_js_stopwatch"]})}}var c=(function(t){function e(e,n){var r=t.call(this,n)||this;return a(e),r.stopwatchSpanName=e,r}return n.__extends(e,t),e.start=function(t){a(t),o.LOG_REACT_CMP_LOAD_TIMING&&(e.allSpanNames[t]=!0,i.JSStopwatch.startSpan(t,{stopwatchName:e.stopwatchName,async:!0}))},e.end=function(t){e.allSpanNames[t]&&(i.JSStopwatch.endSpan(t,{stopwatchName:e.stopwatchName}),e.allSpanNames[t]=!1)},e.prototype.componentWillMount=function(){o.LOG_REACT_CMP_LOAD_TIMING&&(e.allSpanNames[this.stopwatchSpanName]=!0,i.JSStopwatch.startSpan(this.stopwatchSpanName,{stopwatchName:e.stopwatchName,async:!0}))},e.prototype.componentDidMount=function(){e.allSpanNames[this.stopwatchSpanName]&&(i.JSStopwatch.endSpan(this.stopwatchSpanName,{stopwatchName:e.stopwatchName}),e.allSpanNames[this.stopwatchSpanName]=!1)},e})(r.Component);c.stopwatchName="react_render",c.react_render_stopwatch=i.JSStopwatch.create_stopwatch_if_not_exist("react_render"),c.allSpanNames={},e.ReactLogger=c;var u=(function(t){function e(e,n){var r=t.call(this,n)||this;return a(e),r.stopwatchSpanName=e,r}
return n.__extends(e,t),e.prototype.componentWillMount=function(){o.LOG_REACT_CMP_LOAD_TIMING&&(c.allSpanNames[this.stopwatchSpanName]=!0,i.JSStopwatch.startSpan(this.stopwatchSpanName,{stopwatchName:c.stopwatchName,async:!0}))},e.prototype.componentDidMount=function(){c.allSpanNames[this.stopwatchSpanName]&&(i.JSStopwatch.endSpan(this.stopwatchSpanName,{stopwatchName:c.stopwatchName}),c.allSpanNames[this.stopwatchSpanName]=!1)},e})(r.PureComponent);u.stopwatchName="react_render",u.react_render_stopwatch=i.JSStopwatch.create_stopwatch_if_not_exist("react_render"),e.ReactPureLogger=u}),function(){define("modules/clean/referrer_cleansing_redirect",["external/sjcl","modules/core/browser","modules/core/cookies","modules/core/uri"],function(t,e,n,r){var i,o,s;return s=function(e){var r,i,o;return r=t.codec.utf8String.toBits(n.read("__Host-js_csrf")),t.codec.utf8String.toBits(e),i=new t.misc.hmac(r),o=i.encrypt(e),t.codec.base64.fromBits(o)},i=function(t){var e,n;return e=r.parse(t).scheme,e&&"http"!==e&&"https"!==e?"#":(n=new r({scheme:"https",authority:"www.dropbox.com",path:"/referrer_cleansing_redirect"}),n.setQuery({url:t,hmac:s(t)}),n)},o=function(t){return e.redirect(i(t))},{get_redirect_uri:i,redirect:o}})}.call(this),define("modules/clean/static_urls",["require","exports","modules/constants/env","modules/core/exception","modules/core/uri"],function(t,e,n,r,i){"use strict";function o(t){r.assert(0===t.indexOf("/static/"),"#{path} is not a /static url");return new i({scheme:"https",authority:n.STATIC_CONTENT_HOST,path:t}).toString()}e.static_url=o}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("modules/clean/storage",[],function(){var e,n,r;return e=(function(){function t(){}return t.storage=void 0,t.get=function(t){if(this.storage&&window.JSON)return JSON.parse(this.storage.getItem(t))},t.set=function(t,e){var n;if(this.storage&&window.JSON)try{return null===e?this.delete(t):this.storage.setItem(t,JSON.stringify(e))}catch(t){if(n=t,!(n instanceof DOMException&&22===n.code))throw n}},t.delete=function(t){var e;return null!=(e=this.storage)?e.removeItem(t):void 0},t.reset=function(){var t;return null!=(t=this.storage)?t.clear():void 0},t})(),r=(function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.storage=(function(){try{return window.sessionStorage}catch(t){}})(),n})(e),n=(function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.storage=(function(){try{return window.localStorage}catch(t){}})(),n})(e),{SessionStorage:r,LocalStorage:n}})}.call(this),function(){define("modules/clean/stormcrow/stormcrow_panel_action_types",[],function(){var t;return t={},t.ActionTypes={STORMCROW_REQUEST_INFO_RETRIEVED:"STORMCROW_REQUEST_INFO_RETRIEVED"},t})}.call(this),function(){define("modules/clean/stormcrow/stormcrow_panel_actions",["modules/clean/flux/dispatcher","modules/clean/stormcrow/stormcrow_panel_action_types"],function(t,e){var n;return n=e.ActionTypes,new((function(){function e(){}return e.prototype.FEATURES_USED_URL="/stormcrow_features_used",e.prototype.add_request_info=function(e){return t.dispatch({type:n.STORMCROW_REQUEST_INFO_RETRIEVED,data:e})},e})())})}.call(this),function(){define("modules/clean/undo",["jquery","modules/constants/undo_strings","modules/core/notify"],function(t,e,n){return(function(){function r(){}return r.perform_undo=function(){if(null!=this.undo_handler)return this.undo_handler(this.undo_info),this.undo_handler=this.undo_info=null},r.notifyWithUndo=function(i,o,s,a,c){var u,_;return a=a||30,c=c||e.UNDO,o&&Object.keys(o).length>0?(this.undo_info=o,this.undo_handler=s,u=t("<span />"),null!=i.toHTML?u.html(i.toHTML()):u.text(i),_=t('<button class="button-as-link"/>').text(c),_.on("click",function(t){return t.preventDefault(),r.perform_undo(),n.clear()}),u.append("&nbsp;").append(_),this.undo_notification=n.success(u,a)):n.success(i)},r})()})}.call(this),define("modules/clean/user",["require","exports"],function(t,e){"use strict";return(function(){function t(t){Object.assign(this,t)}return t.prototype.toString=function(){return String(this.id)},t})()}),define("modules/clean/viewer",["require","exports","tslib","modules/constants/viewer","modules/core/exception","modules/clean/user"],function(t,e,n,r,i,o){"use strict";var s=(function(){function t(t){void 0===t&&(t={}),this.replace_viewer_data(t)}return t.get_viewer=function(){return t._cached_viewer},t.get_role_title=function(t){return this.get_viewer().get_title_by_role(t.role)},t.get_root_name=function(t){return this.get_viewer().get_root_name_by_role(t.role)},t.get_is_signed_in=function(t){return t.is_signed_in},t.prototype.replace_viewer_data=function(t){void 0===t&&(t={}),this._authed_users={},this._all_users={};for(var e=t._user_data||[],n=0,r=e;n<r.length;n++){var i=r[n],s=new o(i);this._all_users[s.id]=s,i._authed&&(this._authed_users[s.id]=s)}this.display_name=t.display_name,this.team_id=t.team_id,this.team_dbtid=t.team_dbtid,this.team_name=t.team_name,this.team_is_limited=t.team_is_limited||!1,this.is_assume_user_session=t.is_assume_user_session||!1,this.is_team_assume_user_session=t.is_team_assume_user_session||!1,this.is_reseller_session=t.is_reseller_session||!1,this.can_moderate_comments=t.can_moderate_comments||!1,this.is_signed_in=e.length>0,this.is_paired=e.length>1,t.deprecated_first_user_in_the_cookie_id&&(this.deprecated_first_user_in_the_cookie=this.get_user_by_id(t.deprecated_first_user_in_the_cookie_id)),this._load_cached_users()},t.prototype.get_user_by_role=function(t,e){var n=this.get_uid_by_role(t);return null!=n?this.get_user_by_id(n,e):void 0},t.prototype.role_exists=function(t){return null!=this.get_uid_by_role(t)},t.prototype.get_user_by_id=function(t,e){i.assert(this.is_uid_associated(t),"User "+t+" is not associated with this viewer");var n=e?this._all_users:this._authed_users,r=n[t];return i.assert(!!r,"User "+t+" is not signed in"),r},t.prototype.is_role_signed_in=function(t){var e=this.get_uid_by_role(t);return null!=e&&e in this._authed_users},t.prototype.is_uid_signed_in=function(t){return t in this._authed_users},t.prototype.is_user_signed_in=function(t){return null!=t&&this.is_uid_signed_in(t.id)},t.prototype.is_uid_associated=function(t){return t in this._all_users},t.prototype.get_users=function(t){var e=t?this._all_users:this._authed_users,n=Object.keys(e).map(function(t){return e[t]});return n.sort(function(t,e){return"personal"===t.role?-1:1}),n},t.prototype.get_user_ids=function(t){return this.get_users(t).map(function(t){return t.id})},t.prototype.get_roles=function(t){return this.get_users(t).map(function(t){return t.role})},t.prototype.get_account_ids=function(t){return this.get_users(t).map(function(t){return t.account_id})},t.prototype.get_email_by_role=function(t){var e=this.get_user_by_role(t,!0);return e&&e.email},t.prototype.get_uid_by_role=function(t){"photos"===t&&(t=this.is_paired||!this.is_signed_in?"personal":this._all_users[Object.keys(this._all_users)[0]].role);for(var e in this._all_users)if(this._all_users.hasOwnProperty(e)){var n=this._all_users[e];if(n.role===t)return n.id}},t.prototype.get_title_by_role=function(t){return this.is_paired?"personal"===t?r.PERSONAL_ROLE_STRING:this.team_name:""},t.prototype.get_root_name_by_role=function(t){return this.get_title_by_role(t)||r.DEFAULT_ROOT_NAME},t.prototype._sign_in_all_users=function(){this._authed_users=n.__assign({},this._all_users),this._load_cached_users()},t.prototype._sign_out_user_by_id=function(t){delete this._authed_users[t],this._load_cached_users()},t.prototype.sign_in_user_by_id=function(t){i.assert(this.is_uid_associated(t),"User "+t+" is not associated with this viewer"),this._authed_users[t]=this._all_users[t],this._load_cached_users()},t.prototype._load_cached_users=function(){this.personal_user=this._authed_users[this.get_uid_by_role("personal")],this.photos_user=this._authed_users[this.get_uid_by_role("photos")],this.work_user=this._authed_users[this.get_uid_by_role("work")],this.personal_email=this.get_email_by_role("personal"),this.work_email=this.get_email_by_role("work"),this.is_personal_user_signed_in=this.is_role_signed_in("personal"),this.is_photos_user_signed_in=this.is_role_signed_in("photos"),this.is_work_user_signed_in=this.is_role_signed_in("work")},t})();return s._cached_viewer=new s(r._viewer_properties),s}),function(){define("modules/clean/web_module_timing",[],function(){return{module_times:[],reset:function(){return this.module_times=[]},get_module_times:function(){return this.module_times},add_module:function(t,e,n){var r,i;return r={load_time:e,callback_duration:n},null!=(null!=t?t.url:void 0)&&(r.url=t.url),null!=(null!=t?t.id:void 0)&&(r.name=t.id),null!=(null!=t&&null!=(i=t.parentMap)?i.url:void 0)&&(r.parent=t.parentMap.url),this.module_times.push(r)}}})}.call(this),define("modules/clean/web_timing_logger",["require","exports","modules/clean/ajax","modules/clean/devtools/perf_hub_actions","modules/clean/event_load","modules/constants/request","modules/constants/webtiming","modules/constants/page_load","modules/core/browser","modules/core/exception","modules/clean/web_module_timing","modules/clean/js_client_stopwatch","modules/clean/loggers/cache_logger","modules/clean/loggers/pagelet_perf"],function(t,e,n,r,i,o,s,a,c,u,_,l,p,d){"use strict";function h(t){void 0===t&&(t={}),M=!!t.is_pagelet,q=!!t.log_time_to_view,j=!!t.log_time_to_interactive,P=!!t.ttv_at_dom_interactive,J=!!t.tti_at_dom_interactive,U=null!=t.source_type?t.source_type:"web",G=null!=t.subtypes?t.subtypes:{},V=null!=t.tti_exclusion_flow?t.tti_exclusion_flow:"";var n=c.performance();if(n){n.setResourceTimingBufferSize&&n.setResourceTimingBufferSize(300),H=!0,Q=!1,W=!1;var r=0;if(s.LOG_JS_MODULE_TIMING&&s.LOG_TIMING_DELAY&&(r=600),l.JSStopwatch.create_stopwatch_if_not_exist("web_timing_logger"),i.window_load(function(){setTimeout(function(){return w("window_onload")},r)}),!P&&window._timingData&&(null!=window._timingData.ttv&&(e.time_to_view=window._timingData.ttv.getTime()),null!=window._timingData.tti&&(e.time_to_interactive=window._timingData.tti.getTime())),z){for(var o in z)S(o,z[o]);z=null}}}function f(){M=!1,q=!1,j=!1,P=!1,J=!1,Q=!1,U="web",H=!1,W=!1,e.time_to_view=null,e.time_to_interactive=null,z=null,G={},V=""}function m(){var t=c.performance();if(t&&t.timing){var e=t.timing;return e.navigationStart||e.fetchStart}}function g(){var t=c.performance();if(t&&t.now)return+t.now()}function w(t,n){if(void 0===n&&(n={}),H&&!W){var r=c.performance();if(r&&r.timing){var i=r.timing,u=m(),_=i.loadEventEnd;if(u&&_&&(p.logEnsembleCacheData(),p.logSWCacheData(),d.logPageletPerf(),P&&(M&&window.ensemble?e.time_to_view=window.ensemble.getEmbeddedAppDOMInteractive():e.time_to_view=i.domInteractive),!(q&&null==e.time_to_view||(J&&(e.time_to_interactive=i.domInteractive),j&&null==e.time_to_interactive)))){l.JSStopwatch.startSpan("process_nav_timing",{stopwatchName:"web_timing_logger"});var h=!W;W=!0;var f={log_source:t,subtypes:JSON.stringify(G)};o.IS_HTTP2&&(f.is_spdy=!0),M&&(f.is_pagelet=!0),"maestro"===G.sitedesign&&(f.maestro_design=!0),navigator.serviceWorker&&(f.service_worker_supported=!0,navigator.serviceWorker.controller&&(f.service_worker_active=!0)),M&&window.ensemble&&(f.service_worker_active_initial=window.ensemble.serviceWorkerActiveOnInitialLoad),f.delayed_tti_for_css=Q,M&&window.ensemble&&window.ensemble.isEmbeddedAppCacheHit&&(f.embedded_app_cache_hit=window.ensemble.isEmbeddedAppCacheHit()),""!==V&&(f.tti_exclusion_flow=V),Object.keys(n).forEach(function(t){var e=n[t];e&&(f[t]=e)});var g;g=q?e.time_to_view-u:null;var w;w=j?e.time_to_interactive-u:null;var v={navigation_type:B(),server_request_start_time:o.REQUEST_START_TIME,browser_time:(i.redirectStart||i.fetchStart)-u,redirect_time:i.fetchStart-u,dns_time:i.domainLookupEnd-u,tcp_connect_time:(i.secureConnectionStart||i.requestStart)-u,ssl_connect_time:i.requestStart-u,time_to_first_byte:i.responseStart-u,time_to_last_byte:i.responseEnd-u,dom_load_time:i.domContentLoadedEventEnd-u,page_load_time:_-u,extra_columns:JSON.stringify(f),subtypes:JSON.stringify(G)};r.getEntriesByType&&(F(v),l.JSStopwatch.addSpanAnnotation("process_nav_timing","logged_resources","1",{stopwatchName:"web_timing_logger"})),L(v),l.JSStopwatch.addSpanAnnotation("process_nav_timing","logged_modules","1",{stopwatchName:"web_timing_logger"}),l.JSStopwatch.endSpan("process_nav_timing",{stopwatchName:"web_timing_logger"}),M&&y(),s.LOG_BROWSER_PERFORMANCE_INFO&&E(),l.JSStopwatch.log_stored_results(),v.repo_rev=a.REPO_REV,q&&(v.time_to_view=g),j&&(v.time_to_interactive=w),I(v,void 0,h)}}}}function v(t){""!==V&&(V+=","),V+=t}function y(){if(window.ensemble&&window.ensemble.getJSStopwatchData){l.JSStopwatch.create_stopwatch("ensemble");var t=window.ensemble.getJSStopwatchData();for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];l.JSStopwatch.recordTrace(e,{stopwatchName:"ensemble",traceTime:n.end})}}}function S(t,e){G?t in G&&(G[t]=e):(z||(z=Object.create(null)),z&&(z[t]=e))}function E(){var t=c.performance();if(t&&t.timing){var e=t.timing,r={request_id:o.REQUEST_ID,navigation_start:e.navigationStart,unload_event_start:e.unloadEventStart,unload_event_end:e.unloadEventEnd,redirect_start:e.redirectStart,redirect_end:e.redirectEnd,fetch_start:e.fetchStart,domain_lookup_start:e.domainLookupStart,domain_lookup_end:e.domainLookupEnd,connect_start:e.connectStart,secure_connect_start:e.secureConnectionStart,connect_end:e.connectEnd,request_start:e.requestStart,response_start:e.responseStart,response_end:e.responseEnd,dom_loading:e.domLoading,dom_interactive:e.domInteractive,dom_content_loaded_event_start:e.domContentLoadedEventStart,dom_content_loded_event_end:e.domContentLoadedEventEnd,dom_complete:e.domComplete,load_event_start:e.loadEventStart,load_event_end:e.loadEventEnd,referrer:document.referrer};n.SilentBackgroundRequest({url:"/alternate_wtl_browser_performance_info",type:"POST",data:r})}}function b(t){var e=c.performance();if(e&&e.getEntriesByType){var n=e.getEntriesByType("resource").filter(function(e){return e.name.indexOf(t)!==-1}),r=n[0];if(r&&r.responseEnd){var i="resource_response_end_"+t;l.JSStopwatch.create_stopwatch_if_not_exist("resource_timing"),l.JSStopwatch.recordTrace(i,{stopwatchName:"resource_timing",traceTime:r.responseEnd})}}}function x(){e.time_to_view||P||(window._timingData&&null!=window._timingData.ttv?e.time_to_view=window._timingData.ttv.getTime():e.time_to_view=(new Date).getTime(),console.timeStamp&&console.timeStamp("TTV"),w("mark_time_to_view"))}function A(t){if(void 0===t&&(t={}),window.ensemble&&window.ensemble.waitingForCss)return Q=!0,void(window.ensemble.mark_tti_callback=A);if(!e.time_to_interactive&&!J){var n=g();if(void 0!==n){l.JSStopwatch.create_stopwatch_if_not_exist("maestro_tracing"),l.JSStopwatch.recordTrace("mark_time_to_interactive",{stopwatchName:"maestro_tracing",traceTime:n})}window.requestAnimationFrame(function(){if(!e.time_to_interactive){if(window._timingData&&null!=window._timingData.tti?e.time_to_interactive=window._timingData.tti.getTime():e.time_to_interactive=(new Date).getTime(),console.timeStamp&&console.timeStamp("TTI"),window.ensemble&&window.ensemble.markTTI)window.ensemble.markTTI();else{var n=document.createEvent("Event");n.initEvent("TTI",!0,!0),window.dispatchEvent(n)}w("mark_time_to_interactive",t)}})}}function T(){return new Promise(function(t,n){if(window.ensemble){if(window.ensemble.ttiMarked)return void t()}else if(e.time_to_interactive)return void t();var r=function(e){window.removeEventListener("TTI",r),t()};window.addEventListener("TTI",r)})}function C(t,e,n,r,i,o){var s={navigation_type:"ajax",page_load_time:t,url:o};i&&(s.server_response_time=i),null!=n&&(s.extra_columns=JSON.stringify(n)),null!=r&&(s.stopwatch_suffix=r),I(s,e)}function O(t){var e=g();if(void 0!==e){l.JSStopwatch.create_stopwatch_if_not_exist("maestro_tracing"),l.JSStopwatch.recordTrace(t,{stopwatchName:"maestro_tracing",traceTime:e}),console.timeStamp&&console.timeStamp(t)}}function D(){O("application_code_start")}function N(){O("fetched_data_required_for_tti")}function I(t,e,i){void 0===i&&(i=!1);var s=l.JSStopwatch.startSpan("wtl_endpoint",{stopwatchName:"web_timing_logger"});l.JSStopwatch.addSpanAnnotation("wtl_endpoint","navigation_type",t.navigation_type,{stopwatchName:"web_timing_logger",spanId:s}),t.url=t.url||c.get_href(),t.referrer=document.referrer,t.request_id=o.REQUEST_ID,t.source_type=U,t.request_tracing_enabled=o.REQUEST_TRACING_ENABLED,null!=e&&(t.url_info=e),window.ensemble&&window.ensemble.viewer&&(t.active_user_id=window.ensemble.viewer.getActiveUser().userId),n.SilentBackgroundRequest({url:"/alternate_wtl",type:"POST",data:t,success:function(t){l.JSStopwatch.endSpan("wtl_endpoint",{stopwatchName:"web_timing_logger",spanId:s});var e=document.getElementsByClassName("perf-hub-link-container");if(i&&e.length){var n=JSON.parse(t);n.status&&r.PerfHubActions.add_web_timing_details(n)}}})}function F(t){var e=[],n={},r=c.performance();if(r){var i=r.getEntriesByType("resource");if(i instanceof Array)for(var o=0,a=i;o<a.length;o++){var u=a[o],_=R(u);_ in n||(n[_]={count:0,total_time:0}),n[_].count++,n[_].total_time+=u.duration,k(_)&&u.encodedBodySize&&(n[_].total_size=n[_].total_size||0,n[_].total_size+=u.encodedBodySize),k(_)&&u.transferSize&&(n[_].transfer_size=n[_].transfer_size||0,n[_].transfer_size+=u.transferSize),e.push({type:_,name:u.name.substr(0,2e3),start:u.startTime,end:u.responseEnd,connectStart:u.connectStart,connectEnd:u.connectEnd,domainLookupStart:u.domainLookupStart,domainLookupEnd:u.domainLookupEnd})}for(var l in n)n.hasOwnProperty(l)&&(t["resource_"+l+"_count"]=n[l].count,t["resource_"+l+"_avg_time"]=n[l].total_time/n[l].count,void 0!==n[l].total_size&&(t["resource_"+l+"_total_size"]=n[l].total_size),void 0!==n[l].transfer_size&&(t["resource_"+l+"_transfer_size"]=n[l].transfer_size),s.LOG_RESOURCE_TIMING&&(t.resource_details=JSON.stringify(e)))}}function L(t){var e=c.performance();if(e&&e.getEntriesByName){for(var n=_.get_module_times(),r=[],i=0,o=n;i<o.length;i++){var s=o[i],a=s.url;if(void 0!==a||s.name.indexOf("!")!==-1){var l=[];if(a&&(l=e.getEntriesByName(a,"resource")),0!==l.length)s.start_time=l[0].responseEnd;else{if(!("callback_duration"in s))continue;s.start_time=0}r.push(s)}else u.reportStack("Module "+s.name+" with invalid map object fetched by requirejs",{severity:u.SEVERITY.NONCRITICAL,tags:["log_js_module_timing"]})}t.js_module_times=JSON.stringify(r)}}function R(t){var e=t.name,n=t.initiatorType,r=e.lastIndexOf(".");if(r>0){var i=e.substring(r);if([".png",".gif",".jpg",".svg"].indexOf(i)>-1)return"img";if(".js"===i)return"script";if(".css"===i)return"css"}return["css","img","script","link"].indexOf(n)===-1?"xmlhttprequest"===n?"ajax":"other":n}function k(t){return"css"===t||"script"===t||"img"===t}function B(){var t=c.performance();if(t&&t.navigation){var e=t.navigation;switch(e.type){case e.TYPE_NAVIGATE:return"navigate";case e.TYPE_RELOAD:return"reload";case e.TYPE_BACK_FORWARD:return"back_forward"}}}var M,q,j,P,J,U,H,W,G,z,Q,V;e.time_to_view=null,e.time_to_interactive=null,e.initialize_module=h,e.reset=f,e.start_time=m,e.time_since_start=g,e.set_tti_exclusion_flow=v,e.log_ensemble_stopwatch=y,e.set_subtypes_value=S,e.log_browser_performance_info=E,e.log_resource_timing=b,e.mark_time_to_view=x,e.mark_time_to_interactive=A,e.waitForTTI=T,e.log_ajax_transition=C,e.log_js_modules_application_code_start=D,e.log_js_modules_fetched_data_required_for_tti=N}),define("modules/core/accessible_announce",["require","exports","jquery","external/purify","modules/clean/css"],function(t,e,n,r,i){"use strict";var o=(function(){function t(){}return t.polite=function(t,e){return void 0===e&&(e=10),this.announce("polite",t,e)},t.assertive=function(t,e){return void 0===e&&(e=10),this.announce("assertive",t,e)},t.clear=function(){return this.lastTimeout&&clearTimeout(this.lastTimeout),n("#accessible-announce").html("").attr("aria-live","off")},t.announce=function(t,e,r){var o=this;return void 0===r&&(r=10),i.require_css("/static/css/accessibility-vflRPMGHg.css",function(){return n("#accessible-announce").length?(o.setMessage(e,t),o.scheduleClear(r)):(n("body").append("<div id='accessible-announce' aria-live='assertive' class='ax-visually-hidden'></div>"),setTimeout(function(){return o.setMessage(e,t),o.scheduleClear(r)},o.TIMEOUT_LENGTH))})},t.setMessage=function(t,e){this.clear();var i=n("#accessible-announce");i.attr("aria-live",e),null!=t.toHTML?i.html(r.sanitize(t.toHTML())):"string"==typeof t?i.text(t):t instanceof n&&i.html(r.sanitize(t.html()))},t.scheduleClear=function(t){return this.lastTimeout=setTimeout(this.clear,1e3*t)},t})();o.TIMEOUT_LENGTH=50,e.AccessibleAnnounce=o}),define("modules/core/browser",["require","exports","modules/constants/env","modules/core/exception","modules/core/uri"],function(t,e,n,r,i){"use strict";function o(t){t=t.toLowerCase();var e=/(ipad)/.exec(t)||/(edge)[ \/]([\w.]+)/.exec(t)||/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||/(trident).*? rv:([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[],n=t.match(/version\/([\d.]+)/i),r=null!=n?e[1]:null;return{browser:e[1]||"",version:r||e[2]||"0"}}function s(t){return Boolean(e.msie)&&parseInt(e.version,10)<=t}function a(t){return Boolean(e.safari)&&parseInt(e.version,10)<=t}function c(t){return void 0===t&&(t=window),t.location.href}function u(t){return void 0===t&&(t=window),t.location.hostname}function _(t){return void 0===t&&(t=window),i.parse(c(t))}function l(){return window.location.hash.split("#")[1]}function p(){return c().split("#")[0]}function d(t){window.location.hash=t}function h(t){var n=e.mockableInternalMethods._parse_target(t);window.open(n,"_blank")}function f(t){t=e.mockableInternalMethods._parse_target(t,{checkDomainWhitelist:!1,httpsOnly:!1}),window.open(t,"_blank")}function m(t,n){void 0===n&&(n=window);var r=e.mockableInternalMethods._parse_target(t,{target_window:n});e.mockableInternalMethods._navigate(r,n)}function g(t){var n=e.mockableInternalMethods._parse_target(t);window.location.replace(n)}function w(t){void 0===t&&(t=!1),window.location.reload(t)}function v(){return window.performance||null}function y(){var t=v();return t&&t.now&&t.timing?Math.round(t.now()+t.timing.navigationStart):Date.now()}function S(t){t=e.mockableInternalMethods._parse_target(t,{checkDomainWhitelist:!1,httpsOnly:!1}),e.mockableInternalMethods._navigate(t)}function E(){if(window.matchMedia){return Boolean(window.matchMedia("(-webkit-min-device-pixel-ratio: 1.1), (min-resolution: 192dpx), (min-resolution: 1.1dppx)").matches)}return!!window.devicePixelRatio&&window.devicePixelRatio>1.1}function b(){return window.navigator.onLine}function x(t){window.addEventListener("online",t),window.addEventListener("offline",t)}function A(t){window.removeEventListener("online",t),window.removeEventListener("offline",t)}var T=o(navigator.userAgent);"trident"===T.browser&&(T.browser="msie");var C=n.REDIRECT_SAFE_ORIGINS;e.ipad="ipad"===T.browser||void 0,e.chrome="chrome"===T.browser||void 0,e.safari=!("webkit"!==T.browser&&!Boolean(e.ipad))||void 0,e.opera="opera"===T.browser||void 0,e.msie="msie"===T.browser||void 0,e.edge="edge"===T.browser||void 0,e.mozilla="mozilla"===T.browser||void 0,e.webkit=!("webkit"!==T.browser&&!Boolean(e.ipad)&&!Boolean(e.chrome))||void 0,e.mac=Boolean(/(macintosh)/.exec(navigator.userAgent.toLowerCase())),e.iphone=Boolean(/(iphone)/.exec(navigator.userAgent.toLowerCase())),e.ipod=Boolean(/(ipod)/.exec(navigator.userAgent.toLowerCase())),e.iOS=e.ipad||e.ipod||e.iphone,e.browser_name=T.browser,e.version=T.version,e.msie_version_at_most=s,e.safari_version_at_most=a,e.get_href=c,e.get_hostname=u,e.get_uri=_,e.get_hash=l,e.get_href_no_hash=p,e.set_hash=d,e.mockableInternalMethods={_navigate:function(t,e){void 0===e&&(e=window),e.location.href=t},_parse_target:function(t,e){var n=void 0===e?{}:e,i=n.target_window,o=void 0===i?window:i,s=n.checkDomainWhitelist,a=void 0===s||s,c=n.httpsOnly,u=void 0===c||c,_=o.document.createElement("a");_.href=t;var l=_.protocol||o.location.protocol;":"===_.protocol&&(l=o.location.protocol);var p=_.hostname||o.location.hostname,d=_.port||o.location.port;"443"===d&&"https:"===l&&(d=""),a&&r.assert(!d,"Non-default port not legal when checking the whitelist.");var h=0===_.pathname.indexOf("/")?_.pathname:"/"+_.pathname;u?r.assert("https:"===l,"Target URI must be secure"):r.assert("data:"!==l&&"javascript:"!==l&&"vbscript:"!==l,"Target URI can't use the data or javascript scheme"),a&&r.assert(C.indexOf(p)>-1,"Target URI must be in the domain whitelist");var f=p;return d&&(f=f+":"+d),t=l+"//"+f+h+_.search+_.hash}},e.open_tab=h,e.unsafe_open_tab=f,e.redirect=m,e.replace_location=g,e.reload=w,e.performance=v,e.now=y,e.unsafeRedirect=S,e.is_high_density_display=E,e.isOnline=b,e.subscribeConnectivityStatusChange=x,e.unsubscribeConnectivityStatusChange=A}),function(){var t=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};define("modules/core/dom",["jquery","modules/clean/keycode"],function(e,n){var r,i,o,s,a,c,u,_,l,p,d,h,f,m,g,w,v,y,S,E,b,x,A,T,C,O,D;return i=n.KeyCode,r="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]",o="no-scroll",w=function(t){return!!t&&(1===t.nodeType||t.length>=1&&1===t[0].nodeType)},h=function(){return v(document.activeElement)},v=function(t){var e,n;return("INPUT"===(e=null!=t?t.tagName:void 0)||"TEXTAREA"===e||"SELECT"===e)&&"submit"!==(n=null!=t?t.type:void 0)&&"button"!==n||g(t)},g=function(t){return(null!=t?t.hasAttribute:void 0)&&(null!=t?t.hasAttribute("contenteditable"):void 0)&&"false"!==(null!=t?t.getAttribute("contenteditable").toLowerCase():void 0)},D=function(t){var n,r,i;return n=e(t),i=n.offset(),r=e(window),{left:i.left-r.scrollLeft(),top:i.top-r.scrollTop()}},a=null,c=null,O=function(){return a||(a={height:e(window).height(),width:e(window).width()}),c||(c=e(window).on("resize",function(){return a=null})),a},p=function(){return Math.max(e(document).height(),e(window).height(),document.documentElement.clientHeight)},u=null,s=null,A=function(){var t,n;return u||(u=e(window).scroll(function(){return s=null})),y()?s||(n=e(window).scrollTop(),t=e(window).scrollLeft(),s={0:t,1:n,left:t,top:n}):(n=_.top,t=_.left,s={0:t,1:n,left:t,top:n}),s},E=function(){return s=null},y=function(){return!e(document.documentElement).hasClass(o)},x=0,_=null,b=function(){var t,n,r;if(x++,t=e(document.documentElement),!t.hasClass(o))return _=A(),r=-1*_.top+"px",n=-1*_.left+"px",t.css({top:r,left:n}),t.addClass(o)},C=function(){var t,n,r;if(x>0&&x--,t=e(document.documentElement),0===x&&t.hasClass(o))return r=_.top,n=_.left,t.css({top:"",left:""}),t.removeClass(o),T(n,r+1),T(n,r-1),T(n,r)},T=function(t,n){var r,i,o;return t=Math.max(t,0),n=Math.max(n,0),n>A().top&&(n=Math.min(n,p()-d.viewport_dimensions().height)),y()?(window.scrollTo(t,n),s={0:t,1:n,left:t,top:n}):(_={0:t,1:n,left:t,top:n},o=-1*n+"px",i=-1*t+"px",r=e(document.documentElement),r.css({top:o,left:i}))},l=function(t,n,r){var i,o,s,a,c,u,_,l;return o=e(n),s=e(t),u={setLeft:!0,setTop:!0,setWidth:!0,setHeight:!0,offsetTop:0,offsetLeft:0},r=e.extend({},u,r),l=D(o),_={top:0,left:0},i=null,"absolute"===s.css("position")&&(i=s.offsetParent(),_=D(i)),i&&i[0]===document.body&&(_.left-=document.body.offsetLeft,_.top-=document.body.offsetTop),r.setLeft&&(a=l.left-_.left+r.offsetLeft+"px",s.css("left",a)),r.setTop&&(c=l.top-_.top+r.offsetTop+"px",s.css("top",c)),r.setWidth&&s.width(o[0].offsetWidth),r.setHeight&&s.height(o[0].offsetHeight),s},D=function(t){var n,r,i;return n=e(t),i=n.offset(),r=e(window),{left:i.left-r.scrollLeft(),top:i.top-r.scrollTop()}},f=function(t,n){var i;return i=e(t).find(r).filter(function(){return!!(this.offsetWidth&&this.offsetHeight||this.getClientRects().length)}),n?i.not('*[tabindex="-1"]'):i},m=function(t){var e,n,r,i;return i=f(t,!0),e=i.filter('*:not([tabindex]), *[tabindex="0"]'),r=i.not(e).toArray(),r.length?(n=function(t,e){var n,r;return n=parseInt(t.getAttribute("tabindex"),10),r=parseInt(e.getAttribute("tabindex"),10),n-r},r.sort(n),r.concat(e.toArray())):e.toArray()},S=function(e,n){var r,o,s,a,c,u,_,l,p;if(n.which===i.TAB&&(l=d.getTabbableElementsIn(e),l.length)){if(p=l.indexOf(n.target),p===-1){if(n.preventDefault(),s=d.getFocusableElementsIn(e).toArray(),n.shiftKey&&s.reverse(),a=s.indexOf(n.target),a===-1)return l[0].focus();for(o=null,_=s.slice(a),c=0,u=_.length;c<u;c++)if(r=_[c],t.call(l,r)>=0){o=r;break}return o?o.focus():n.shiftKey?l[l.length-1].focus():l[0].focus()}if(n.shiftKey){if(0===p)return n.preventDefault(),l[l.length-1].focus()}else if(p===l.length-1)return n.preventDefault(),l[0].focus()}},d={clone_position:l,document_height:p,focus_in_input:h,is_input:v,is_content_editable:g,is_page_scrollable:y,scroll_clear_cache:E,scroll_lock_document:b,scroll_offsets:A,scroll_to:T,scroll_unlock_document:C,is_element:w,viewport_offset:D,viewport_dimensions:O,getFocusableElementsIn:f,getTabbableElementsIn:m,keepFocusIn:S}})}.call(this),function(){define("modules/core/html",["jquery","external/underscore","modules/constants/page_load"],function(t,e,n){var r;return r=(function(){function t(t){this._str_DONT_TOUCH=t}return t.prototype.toHTML=function(){return this._str_DONT_TOUCH},t.prototype.toString=function(){return"[object HTML]"},t})(),(function(){var i,o,s;return r.tmpl=function(i,o){var s,a,c,u;return/[^\w:.-]/.test(i)||(a=document.getElementById(i),i=a.innerHTML,null!=n.CSP_SCRIPT_NONCE&&n.CSP_SCRIPT_NONCE!==a.getAttribute("nonce")&&(i="")),u=i.replace(/[\r\t\n]/g," ").replace(/'(?=[^%]*%>)/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/<%=(.*?)%>/g,"',__no_conflict_HTML__._raw_escape($1),'").split("<%").join("');").split("%>").join("p.push('"),s=new Function("__no_conflict_HTML__","__no_conflict_jQuery__","TEMPLATE_DATA","var p=[],print=function(){p.push.apply(p,arguments);}; p.push('"+u+"'); return new __no_conflict_HTML__(__no_conflict_jQuery__.trim(p.join('')));"),c=e.partial(s,r,t),o?c(o):c},i=/[^\w@\.\ \-\(\)\,\$~%#\[\]\{\}\!\^]/g,s=function(t){return"&#"+t.charCodeAt(0)+";"},o=function(t){return(""+t).replace(i,s)},r.escape=function(t){return t instanceof r?t:new r(o(t))},r._raw_escape=function(t){return t instanceof r?t.toHTML():"number"==typeof t?t:o(t)}})(),r})}.call(this),define("modules/core/notify",["require","exports","jquery","modules/core/accessible_announce"],function(t,e,n,r){"use strict";var i=(function(){function t(){}return t.success=function(t,e){return void 0===e&&(e=10),r.AccessibleAnnounce.polite(t,e+1),this._show(t,e,"server-success"),this.current()},t.error=function(t,e){return void 0===e&&(e=10),r.AccessibleAnnounce.assertive(t,e+1),this._show(t,e,"server-error"),this.current()},t.warning=function(t,e){return void 0===e&&(e=10),r.AccessibleAnnounce.polite(t,e+1),this._show(t,e,"server-warning"),this.current()},t.info=function(t,e){return void 0===e&&(e=10),r.AccessibleAnnounce.polite(t,e+1),this._show(t,e,"server-info"),this.current()},t.clear=function(){this._last_timeout&&clearTimeout(this._last_timeout),this._last_animation&&this._last_animation.stop(),this._last_timeout=null,this._last_animation=null,n("#notify").removeClass("server-error server-info server-success server-warning").hide()},t.isShown=function(){return n("#notify").is(":visible")},t.current=function(){return this._last_timeout},t._show=function(t,e,n){return this._buildElement(),this.clear(),this._setMessage(t),this._showElement(n),this._scheduleHide(e),this.current()},t._buildElement=function(){if(!n("#notify").length){
n("body").append('<div id="notify-wrapper" class="notify-wrapper"> <span id="notify"> <span id="notify-msg" class="notify-msg" /> </span> </div>'),n(".maestro .has-top-notification").length&&n("#notify-wrapper").addClass("with-top-notification")}},t._setMessage=function(t){var e=n("#notify-msg");null!=t.toHTML?e.html(t.toHTML()):"string"==typeof t?e.text(t):t instanceof n&&e.html(t)},t._showElement=function(t){var e=n("#notify");e.addClass(t),this._last_animation=e.fadeIn(500)},t._scheduleHide=function(t){this._last_timeout=setTimeout(this._hide,1e3*t)},t._hide=function(){var t=n("#notify");return this._last_animation=t.fadeOut(1e3),this._last_timeout=null},t})();return INLINE_JS.Notify=i,i}),define("modules/core/uri",["require","exports","modules/core/exception"],function(t,e,n){"use strict";var r=(function(){function t(e){if(void 0===e&&(e={}),!(this instanceof t))return new t(e);this.query=new i,this.initFromObject(e)}return t.prototype.initFromObject=function(t){this.setScheme(t.scheme),this.authority=t.authority||"",this.path=t.path||"",this.setQuery(t.query),this.fragment=t.fragment||""},t.prototype.getScheme=function(){return this.scheme},t.prototype.getAuthority=function(){return this.authority},t.prototype.getPath=function(){return this.path},t.prototype.getQuery=function(){return this.query.dict},t.prototype.getFragment=function(){return this.fragment},t.prototype.setScheme=function(t){return void 0===t&&(t=""),n.assert(!t||Boolean(t.match(/^[a-zA-Z][a-zA-Z0-9+.\-]*$/)),"Invalid scheme",{exc_extra:{scheme_param:t}}),this.scheme=t,this},t.prototype.setAuthority=function(t){return void 0===t&&(t=""),this.authority=t,this},t.prototype.setPath=function(t){return void 0===t&&(t=""),this.path=t,this},t.prototype.setQuery=function(t){return void 0===t&&(t={}),this.query=new i(t),this},t.prototype.setFragment=function(t){return void 0===t&&(t=""),this.fragment=t,this},t.prototype.updateQuery=function(t,e){return this.query.add(t,e),this},t.prototype.removeQuery=function(t){return this.query.remove(t),this},t.prototype.clone=function(){return new t(this.toObject())},t.prototype.toObject=function(){return{scheme:this.getScheme(),authority:this.getAuthority(),path:this.getPath(),query:this.getQuery(),fragment:this.getFragment()}},t.prototype.toString=function(){var e="";this.scheme&&(e+=this.scheme+":"),this.authority&&(e+="//"+t.encode(this.authority,":@[]")),this.path&&(n.assert(!this.authority||!this.path.length||"/"===this.path[0],'Path must start with a "/" if URI is not relative'),e+=t.encode(this.path,"/"));var r=this.query.toString();return r&&(e+="?"+r),this.fragment&&(e+="#"+t.encode(this.fragment,":@[]/&=+?#!")),e},t.parse=function(e){n.assert(null!=e,"must pass in a valid url-encoded string",{exc_extra:{uri_string_param:e}});var r=String(e).match(/^(?:([^:\/\\?#]+):)?(?:[\/\\]{2}([^\/\\?#]*))?([^?#]*)(?:\?([^#]*))?(?:[#](.*))?$/)||[],o=r[1],s=r[2],a=r[3],c=r[4],u=r[5],_=new t;return _.setScheme(o),_.setAuthority(t.decode(s)),_.setPath(t.decode(a)),_.setQuery(i.parseString(c)),_.setFragment(t.decode(u)),_},t.decode=function(t){return t?decodeURIComponent(t):""},t.encode=function(t,e){if(void 0===e&&(e=""),!t)return"";t=encodeURIComponent(t),e+="~";for(var n=0,r=e;n<r.length;n++){var i=r[n],o=encodeURIComponent(i);t=t.replace(new RegExp(o,"g"),i)}return t},t.encode_parts=function(e,n){return void 0===n&&(n="/"),e.split(n).map(function(e){return t.encode(e)}).join(n)},t})(),i=(function(){function t(t){void 0===t&&(t={}),this.dict={},this.add(t)}return t.parseString=function(e){if(!e)return{};var n={};return e.split("&").forEach(function(e){if(""!==e){var r=e.split("="),i=t.decode(r[0]),o=t.decode(r.slice(1).join("="));if(n.hasOwnProperty(i)){var s=n[i];"string"==typeof s&&(n[i]=[s]),n[i].push(o)}else n[i]=o}}),n},t.prototype.add=function(t,e){if("string"==typeof t)e&&(Array.isArray(e)?this.dict[t]=e.map(String):this.dict[t]=String(e));else for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];null!=r&&(Array.isArray(r)?this.dict[n]=r.map(String):this.dict[n]=String(r))}return this},t.prototype.remove=function(t){return delete this.dict[t],this},t.prototype.replace=function(t){return this.dict=t,this},t.prototype.toString=function(){for(var e=[],n=Object.keys(this.dict).sort(),r=function(n){if(i.dict.hasOwnProperty(n)){var r=i.dict[n];Array.isArray(r)?r.forEach(function(r){e.push(t.encode(n)+"="+t.encode(r))}):e.push(t.encode(n)+"="+t.encode(r))}},i=this,o=0,s=n;o<s.length;o++){r(s[o])}return e.length?e.join("&"):""},t.decode=function(t){return null==t?"":r.decode(t.replace(/\+/g,"%20"))},t.encode=function(t){return null==t?"":r.encode(t).replace(/%20/g,"+")},t})();return(function(t){t.Query=i})(r||(r={})),r});
//# sourceMappingURL=pkg-maestro-core.min.js-vflXnm2Gq.map